\hypertarget{index_intro}{}\section{Introduction}\label{index_intro}
S\+M\+A\+R\+T\+A\+Q\+N\+ET project is aimed at development of a close-\/meshed network of local fine-\/dust data, which can be fed and used well by general public. Further details can be checked at\+: \href{http://www.smartaq.net}{\texttt{ http\+://www.\+smartaq.\+net}}.~\newline
 This script uses a E\+S\+P32 H\+E\+L\+T\+EC Board, a S\+D\+S011 particulate matter sensor and a B\+M\+E280 sensor or a D\+H\+T22 sensor. The \mbox{\hyperlink{index_Fig-1}{Fig-\/1}} shows the main board having different sensors connected together. The E\+S\+P32 is also refered to as crowdsensor. After power on, it opens a Wifi access point, default Password is 12345678. The Wifi access point can be searched by a device (Smartphone, Tablet, Laptop or similar) using the ID shown on the O\+L\+ED display. A webpage (also called \char`\"{}\+Captive Portal\char`\"{}) opens after connection to this AP with Smartphone. If no webpage is opening automatically, it can be opend by typing \char`\"{}http\+://192.\+168.\+244.\+1\char`\"{} into the browser. By using this webpage, the crowdsensor can be connected to any of the available Wifi networks. The crowdsensors configuration page can then be accessed using \href{http://}{\texttt{ http\+://}}\mbox{[}local\+IP\mbox{]}/ or using \href{http://}{\texttt{ http\+://}}\mbox{[}S\+S\+D-\/\+ID\mbox{]}.local/ e.\+g., \href{http://192.168.0.39}{\texttt{ http\+://192.\+168.\+0.\+39}} or \href{http://181712.local}{\texttt{ http\+://181712.\+local}}. The local IP and the S\+S\+D-\/\+ID are both printed on the screen of the crowd sensor. The location address, the thermal sensor type, the ID of the dust sensor S\+D\+S011, the owner of the data and more can be configure using the configuration page. The firware version of the code is hard-\/coded by the constant (\mbox{\hyperlink{main_8h_aa14dc39d52ab121ceb570f1a265385e0}{F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON}}). The detailed debugging can be controlled for the firmware using the constant R\+E\+L\+E\+A\+SE. Following is the details for differnt features and steps to start\+:~\newline

\begin{DoxyItemize}
\item Install the arduino, board and required libraies as explained in \mbox{\hyperlink{index_arduinoide}{Arduino I\+DE}}, \mbox{\hyperlink{index_boardlib}{E\+S\+P32 Arduino core}}, \mbox{\hyperlink{index_lib}{Required Libraries}}
\item Connect the hardware as explained in \mbox{\hyperlink{index_wiring}{Wirings}}, \mbox{\hyperlink{index_hw_sec}{Hardware}} and \mbox{\hyperlink{index_peri}{Peripherals}}
\item Configure the constants in the code as explained in \mbox{\hyperlink{index_const}{Important Constants}}.
\item Compile and upload the cdes as explained in \mbox{\hyperlink{index_upload}{Firmware Uploading}} and \mbox{\hyperlink{index_dialout}{Pyserial}}
\item Configure the Wi\+Fi and other parameters as explained in \mbox{\hyperlink{index_wifi}{Wi\+Fi U\+Sage}} and \mbox{\hyperlink{index_configpage}{Configuration Page}}
\item If everything is installed and configured perfectly, there should be no error i.\+e., E0 as explained in \mbox{\hyperlink{index_errorenc}{Error Decoding}}
\item If there is any errors please look into error or known bug section as explained in \mbox{\hyperlink{index_errorenc}{Error Decoding}} and \mbox{\hyperlink{index_knownbugs}{Known Bugs}}
\item For detailed debugging uncomment R\+E\+L\+E\+A\+SE constant. Some quick trick will also save the time as shown in \mbox{\hyperlink{index_deb}{Quick Debugging}} \label{index_Fig-1}%
\Hypertarget{index_Fig-1}%
  
\begin{DoxyImage}
\includegraphics[width=400px]{board}
\doxyfigcaption{Sensor Board}
\end{DoxyImage}
 
\end{DoxyItemize}\hypertarget{index_oled}{}\subsection{O\+L\+E\+D Display Usage}\label{index_oled}
Built-\/in O\+L\+ED, a S\+S\+D1306 based display, is used to display different type of information, messages, images and QR code. The display is connected using I2C interface using u8g2 library.
\begin{DoxyItemize}
\item Hardware P\+I\+Ns\+: \mbox{\hyperlink{main_8h_ac5d957e4fd3dc11cd97a54cf9ca057a4}{R\+ST}} (16) is reset, \mbox{\hyperlink{main_8h_afbf31d4d5bad7fd61418b8b8036df96c}{O\+L\+E\+D\+\_\+\+S\+DA}} (4) is S\+DA and \mbox{\hyperlink{main_8h_ad3ddbbb48cad4c34406916e199b89122}{O\+L\+E\+D\+\_\+\+S\+CL}} (15) is S\+CL pin of the display and \mbox{\hyperlink{main_8h_a7dfa2c4cfbfcba36416046052e7943e8}{O\+L\+E\+D\+\_\+\+A\+D\+DR}} (0x3c) is the I2C address of the display.
\item I\+C\+O\+NS and QR Codes\+: at the startup it displays logos and then a QR code
\item Which Screens to display and their meaning\+: There are two main screens. The \mbox{\hyperlink{index_Fig-2}{Fig-\/2}} shows the main screen while the \mbox{\hyperlink{index_Fig-3}{Fig-\/3}} shows second screen. During the execution, different screens are\+:
\begin{DoxyEnumerate}
\item When the firmware is started, O\+L\+ED displays and it tries to search the previous configured Wi\+Fi as in \mbox{\hyperlink{index_Fig-2}{Fig-\/2}}. The last line shows the hardware ID of the E\+S\+P32. \label{index_Fig-2}%
\Hypertarget{index_Fig-2}%
  
\begin{DoxyImage}
\includegraphics[width=300px]{searchwifi}
\doxyfigcaption{O\+L\+ED Display\+: Searching Wifi}
\end{DoxyImage}

\item When the firmware could not find previous Wi\+Fi, it opens an AP and shows the screen as in \mbox{\hyperlink{index_Fig-3}{Fig-\/3}}. It shows the S\+S\+ID and Password for AP and its IP address. \label{index_Fig-3}%
\Hypertarget{index_Fig-3}%
  
\begin{DoxyImage}
\includegraphics[width=300px]{apmode}
\doxyfigcaption{O\+L\+ED Display\+: Access Point Wi\+Fi}
\end{DoxyImage}

\item When the Wi\+Fi is connected, it shows that it is waiting for the time to be synchronized, as in \mbox{\hyperlink{index_Fig-4}{Fig-\/4}}. \label{index_Fig-4}%
\Hypertarget{index_Fig-4}%
  
\begin{DoxyImage}
\includegraphics[width=300px]{syncwait}
\doxyfigcaption{O\+L\+ED Display\+: N\+TP Time Sync}
\end{DoxyImage}

\item When the Wi\+Fi is connected, temperature and dust sensor are attached and configured, the screen in \mbox{\hyperlink{index_Fig-5}{Fig-\/5}} shows the sensed values, ID and static IP of the E\+S\+P32. ER shows the error code in hexadecimal. This is explained in the section below. ER of 0x\+C0 means the dust and temperature sensors are not connected. \label{index_Fig-5}%
\Hypertarget{index_Fig-5}%
  
\begin{DoxyImage}
\includegraphics[width=300px]{screen1}
\doxyfigcaption{O\+L\+ED Display Screen-\/1}
\end{DoxyImage}

\item When the Wi\+Fi is connected, temperature and dust sensor are not attached, the screen in \mbox{\hyperlink{index_Fig-6}{Fig-\/6}} shows the messages (i.\+e., F\+E\+I\+N\+S\+T\+A\+U\+B\+S\+E\+N\+S\+OR\+:Bitte verbinden and T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+S\+E\+N\+S\+OR\+:Bitte verbinden, ID and static IP of the E\+S\+P32. When temperature and dust sensor are attached but temperature is not configured, screen shows the messages F\+E\+I\+N\+S\+T\+A\+U\+B\+S\+E\+N\+S\+OR\+:Bitte verbinden and T\+E\+M\+P\+E\+R\+A\+T\+U\+R\+S\+E\+N\+S\+OR\+:Bitte auswaehlen. \label{index_Fig-6}%
\Hypertarget{index_Fig-6}%
  
\begin{DoxyImage}
\includegraphics[width=300px]{screen1error}
\doxyfigcaption{O\+L\+ED Display\+: Screen-\/1 Error}
\end{DoxyImage}

\item When the Wi\+Fi is not connected or it is disconnected or time is not synchronized during the second trial, \mbox{\hyperlink{index_Fig-7}{Fig-\/7}}, shows the messages and ID of the E\+S\+P32. And it restarts. \label{index_Fig-7}%
\Hypertarget{index_Fig-7}%
  
\begin{DoxyImage}
\includegraphics[width=300px]{reboot}
\doxyfigcaption{O\+L\+ED Display\+: Wi\+Fi or N\+TP Error}
\end{DoxyImage}

\item The \mbox{\hyperlink{index_Fig-8}{Fig-\/8}} screen shows some statistical and informative messages, with the intervals of (\mbox{\hyperlink{main_8h_a71a7a65f7dd7e8f3ea14942213cd8217}{S\+E\+N\+S\+O\+R\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}) in non-\/release mode. \label{index_Fig-8}%
\Hypertarget{index_Fig-8}%
  
\begin{DoxyImage}
\includegraphics[width=300px]{screen2}
\doxyfigcaption{O\+L\+ED Display\+: Screen-\/2}
\end{DoxyImage}
 The statistical screen contains the following. These are tentative, we can change the words and information.
\begin{DoxyEnumerate}
\item {\bfseries{Reboot}} is indicating the total number of reboots. This will help us how many normal boots (@4AM) and how many accidental boots happened? Saved in the eeprom.
\item {\bfseries{Obsert}} is the total number of the observations since the beginning. Saved in the eeprom.
\item {\bfseries{Misses}} is the total number of the observations that are not posted correctly i.\+e., negative H\+T\+TP status codes. Saved in the eeprom.
\item {\bfseries{E}} (i.\+e. Errors) is the encoding of the errors in hexadecimal. (see below). Not saved in the eeprom.
\item {\bfseries{Begins}} is the timestamp of the first observation at the time entities were created for the first time. Saved in the eeprom.~\newline

\end{DoxyEnumerate}
\item The QR screen is show at two occasions. First when there is no wifi configured and E\+S\+P32 opens an AP, it shows a screen (\mbox{\hyperlink{index_Fig-3}{Fig-\/3}}) and a QR code alternatively with an interval of \mbox{\hyperlink{my_auto_connect_8h_aaba24da06a6518ece5c17ddc6f952e22}{S\+H\+O\+W\+\_\+\+Q\+R\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}. Other screen after the Wi\+Fi is configured, is continuously with the text (\mbox{\hyperlink{index_Fig-5}{Fig-\/5}}) of and QR code with an interval of \mbox{\hyperlink{main_8h_a71a7a65f7dd7e8f3ea14942213cd8217}{S\+E\+N\+S\+O\+R\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}.
\end{DoxyEnumerate}
\end{DoxyItemize}\hypertarget{index_errorenc}{}\subsection{Error Decoding}\label{index_errorenc}
On the last line of the display, at the right most column indicated the different errors which are encoded in hexadecimal. If there is any error, corresponding bit is set to high. The error encoding is explained below in the Table \doxytablelink{index_Tab-1}{Tab-\/1}\+: \begin{center} \hypertarget{index_Tab-1}{}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{9}{|X[-1]}|}
\caption{Error Enconding}\label{index_Tab-1}\\
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Bit ~\newline
 Location }&\cellcolor{\tableheadbgcolor}\textbf{ 7 }&\cellcolor{\tableheadbgcolor}\textbf{ 6 }&\cellcolor{\tableheadbgcolor}\textbf{ 5 }&\cellcolor{\tableheadbgcolor}\textbf{ 4 }&\cellcolor{\tableheadbgcolor}\textbf{ 3 }&\cellcolor{\tableheadbgcolor}\textbf{ 2 }&\cellcolor{\tableheadbgcolor}\textbf{ 1 }&\cellcolor{\tableheadbgcolor}\textbf{ 0 }\\\cline{1-9}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Bit ~\newline
 Location }&\cellcolor{\tableheadbgcolor}\textbf{ 7 }&\cellcolor{\tableheadbgcolor}\textbf{ 6 }&\cellcolor{\tableheadbgcolor}\textbf{ 5 }&\cellcolor{\tableheadbgcolor}\textbf{ 4 }&\cellcolor{\tableheadbgcolor}\textbf{ 3 }&\cellcolor{\tableheadbgcolor}\textbf{ 2 }&\cellcolor{\tableheadbgcolor}\textbf{ 1 }&\cellcolor{\tableheadbgcolor}\textbf{ 0 }\\\cline{1-9}
\endhead
Error ~\newline
 Type &S\+DS ~\newline
 HW ~\newline
 Error &B\+ME ~\newline
 HW ~\newline
 Error &B\+ME ~\newline
 Select ~\newline
 Error &N\+TP ~\newline
 First ~\newline
 Error &m\+D\+NS ~\newline
 Error &Create ~\newline
 Entities ~\newline
 Error &Location ~\newline
 Missing ~\newline
 Error &H\+T\+TP ~\newline
 Server ~\newline
 Error \\\cline{1-9}
\end{longtabu}
\end{center} 
\begin{DoxyEnumerate}
\item {\bfseries{E00}} indicates \char`\"{}\+N\+O E\+R\+R\+O\+R\char`\"{}.
\item {\bfseries{E01}} indicates \char`\"{}\+H\+T\+T\+P Server Error\char`\"{}, this happens when the H\+T\+TP Server is not responding.
\item {\bfseries{E02}} indicates \char`\"{}\+Location Missing Error\char`\"{}, this happens when the location is not configured on the configuration page.
\item {\bfseries{E04}} indicates \char`\"{}\+Create Entities Error\char`\"{}, this happens when the entities are not created properly.
\item {\bfseries{E08}} indicates \char`\"{}m\+D\+N\+S Error\char`\"{}, this happens when the m\+D\+NS has not started properly.
\item {\bfseries{E10}} indicates \char`\"{}\+N\+T\+P First Error\char`\"{}, this happens when the time is not sync for the first time.
\item {\bfseries{E20}} indicates \char`\"{}\+B\+M\+E Select E\+R\+R\+O\+R\char`\"{}, this happens when the Temperature sensor is not configured from the configuration page.
\item {\bfseries{E40}} indicates \char`\"{}\+B\+M\+E H\+W E\+R\+R\+O\+R\char`\"{}, this happens when the Temperature sensor is not connected.
\item {\bfseries{E80}} indicates \char`\"{}\+S\+D\+S H\+W E\+R\+R\+O\+R\char`\"{}, this happens when the dust sensor is not given.~\newline
 There might b combination of above errors, for Example\+:
\begin{DoxyEnumerate}
\item Error E03 means\+: The comobination of E01 and E02.
\item Error E21 means\+: The temperature sensor is not selected and the location is not configured.
\item Error E01 means\+: There is a H\+T\+TP Server error.
\end{DoxyEnumerate}
\end{DoxyEnumerate}\hypertarget{index_nvs}{}\subsection{Non-\/\+Volatile Storage (\+N\+V\+S) Usage}\label{index_nvs}
N\+VS flash storage is used to save different information permanently. It saves latitude as \char`\"{}latitude\char`\"{}, longitude as \char`\"{}longitude\char`\"{}, S\+D\+S011 ID as \char`\"{}sds011id\char`\"{}, human readable location as \char`\"{}address\char`\"{} license name as \char`\"{}data\+\_\+license, license legal notice as \char`\"{}data\+\_\+owner\char`\"{}, license url as \char`\"{}data\+\_\+url\char`\"{}, error codes as \char`\"{}warning\char`\"{},  starting timestamp as \char`\"{}tom\char`\"{}, total number of observations posted as \char`\"{}t\+Observation\char`\"{},
 total number of errorneous observations as \char`\"{}n\+Observation\char`\"{}, total number of reset counter as \char`\"{}r\+Counter". The configurational parameteres are updated in the nvs when there is change from H\+T\+ML configuration page, while the statistical parameters are updated during different execution scenarios. \hypertarget{index_sdso11}{}\subsection{S\+D\+S011 Dust Sensor Usage}\label{index_sdso11}

\begin{DoxyItemize}
\item Hardware Pins\+: it uses transmit \mbox{\hyperlink{sensor_8h_a7130f8006502cdaa31094baa3f4dd3fa}{S\+D\+S011\+\_\+\+T\+XD}} (13) and recieve \mbox{\hyperlink{sensor_8h_ad2b404eb4de525cef31b8413f5d14b13}{S\+D\+S011\+\_\+\+R\+XD}} (17) pins
\item S\+E\+R\+I\+AL Port\+: it uses the Hardware\+Serial port 2 for \mbox{\hyperlink{sensor_8h_a8f7824c0f2a3aa7e9bac94eac190fa7e}{S\+D\+S\+\_\+\+S\+E\+R\+I\+AL}} 
\end{DoxyItemize}\hypertarget{index_bme280}{}\subsection{B\+M\+E280 Sensor Usage}\label{index_bme280}

\begin{DoxyItemize}
\item Hardware Pins\+: it uses S\+DA \mbox{\hyperlink{sensor_8h_ad9e594e426bce833af06dea308dbbf9a}{B\+M\+E\+\_\+\+S\+DA}} (21) and S\+CL \mbox{\hyperlink{sensor_8h_a5db75d8e5f3deda546603b949c520446}{B\+M\+E\+\_\+\+S\+CL}} (22) pins
\item I2C Port\+: to avoid any mismatch it uses Wire1 (default is Wire0) in bme.\+begin(\+B\+M\+E\+\_\+\+A\+D\+D\+R, \&\+Wire1)
\item I2C address\+: \mbox{\hyperlink{sensor_8h_a9f6149e98e70e1d5be5f0f33921cb7d7}{B\+M\+E\+\_\+\+A\+D\+DR}} as 0x77 for Red, 0x76 for Purple (chinese)
\end{DoxyItemize}\hypertarget{index_wifi}{}\subsection{Wi\+Fi U\+Sage}\label{index_wifi}
Firstly, on power up E\+S\+P32 tries to connect to earlier configured Wi\+Fi untill (\mbox{\hyperlink{my_auto_connect_8h_ab8e5b92436ed19ff04454974ca9b5140}{W\+I\+F\+I\+\_\+\+R\+E\+B\+O\+O\+T\+\_\+\+T\+I\+M\+E\+O\+UT}}), if not found it opens up a new access point. Any client can be connected using S\+S\+ID and Passcode shown on the screen. If some connects to access point a configuration pages is automatically opened, if not, one can open it using \href{http://}{\texttt{ http\+://}}\mbox{[}local\+IP\mbox{]}/ or using \href{http://}{\texttt{ http\+://}}\mbox{[}S\+S\+D-\/\+ID\mbox{]}.local/. Using this configuration page, any avaialable Wi\+Fi arround you can be connected with using respective credentials. The E\+S\+P32 waits for some client to be connected untill (\mbox{\hyperlink{main_8h_a8a1756fdd61bca61d188ce01ece876b9}{A\+P\+M\+O\+D\+E\+\_\+\+R\+E\+B\+O\+O\+T\+\_\+\+T\+I\+M\+E\+O\+UT}}), otherwise it will restart and repeate the process. If some client is connected within timeout, E\+S\+P32 tries to synchronised with the network time untill (\mbox{\hyperlink{main_8h_ad8124687637087b9096f96b838f93400}{N\+T\+P\+\_\+\+T\+I\+M\+E\+O\+U\+T\+\_\+\+W\+A\+IT}}), otherwise it skips this synchronization for the second trial later. Later, before creating server entities it tries to synchronised with the network time untill (\mbox{\hyperlink{main_8h_ad8124687637087b9096f96b838f93400}{N\+T\+P\+\_\+\+T\+I\+M\+E\+O\+U\+T\+\_\+\+W\+A\+IT}}) and restart if not seccessful.\hypertarget{index_configpage}{}\subsection{Configuration Page}\label{index_configpage}
A H\+T\+ML configuration page is prepared using Auto\+Connect library without using Pagebuilder library. Different elements are defined like\+: cfgtitle (A\+C\+Text), cfg\+Script (A\+C\+Element), cfg\+Body (A\+C\+Element), cfg\+Data (A\+C\+Text), cfg\+Body2 (A\+C\+Element) which are combined using Auto\+Connect\+Aux. The function \mbox{\hyperlink{main_8h_a26b99cccf6c7e87054577b293e709733}{handle\+Config()}} is used to handle the \char`\"{}/config\char`\"{} response of Webserver\+::on(...) after button submission, the function \mbox{\hyperlink{main_8h_ad9a1e86fe8a8ccdeddbd435307dc8b9c}{handle\+Root()}} is used to handle the / response of Auto\+Connect\+::on(...), the function \mbox{\hyperlink{main_8h_adb1e5699d1d537b00a661d58f303b8c0}{ota\+Update\+Handler()}} is used to handle the /ota\+Update H\+T\+T\+P\+\_\+\+P\+O\+ST response of Webserver\+::on(...), the function \mbox{\hyperlink{main_8h_ac18409cbc727fcbb81831d42abceffc2}{update\+Handler()}} is used to handle the /update H\+T\+T\+P\+\_\+\+P\+O\+ST response of Webserver\+::on(...), the function \mbox{\hyperlink{main_8h_a27d0e99a6ba203be7c65cd32285853c2}{update\+Handler\+Response()}} is used to handle the /update H\+T\+T\+P\+\_\+\+G\+ET response of Webserver\+::on(...). H\+T\+ML script ota\+Update defines O\+TA uploading webpage using Auto\+Connect\+Aux. The H\+T\+ML configuration element \char`\"{}input\+Address\char`\"{} defines to input the human readable address, \char`\"{}input\+Lon\char`\"{} defines to input location\textquotesingle{}s longitude, \char`\"{}input\+Lat\char`\"{} defines to input location\textquotesingle{}s latitude, \char`\"{}input\+Rhtsensor\char`\"{} defines to select the temperature sensor out of \char`\"{}default\char`\"{}, \char`\"{}\+B\+M\+E280\char`\"{} and \char`\"{}\+D\+H\+T22\char`\"{}; \char`\"{}input\+Sds011id\char`\"{} defines to input the printed S\+D\+S011 serial number, \char`\"{}input\+License\char`\"{} defines to select license type between \char`\"{}\+C\+C0 1.\+0\char`\"{} or \char`\"{}\+C\+C B\+Y 4.\+0\char`\"{} and \char`\"{}input\+Owner\char`\"{} defines to input the legal\+\_\+notice of the license owner. The license \char`\"{}\+C\+C0 1.\+0\char`\"{} and \char`\"{}\+C\+C B\+Y 4.\+0\char`\"{} points to \char`\"{} \#data1\+\_\+url\+\_\+cc0 \char`\"{} and \char`\"{} \#data1\+\_\+url\+\_\+ccby \char`\"{} respectively.~\newline
 The \mbox{\hyperlink{index_Fig-9}{Fig-\/9}} shows an example fo a configuration page. The configuration page has following information from top-\/bottom\+:
\begin{DoxyEnumerate}
\item {\bfseries{Menus}}\+: There are different menues which performs different actions
\item {\bfseries{Title}}\+: It indicates the title of page and the firmware version.
\item {\bfseries{Map}}\+: It indicates the google map of the location selected. Or you can choose any location from this map using the the cursor.
\item {\bfseries{Address}}\+: One can input the human readable address for the location.
\item {\bfseries{Longitude}}\+: One can input the longitude of the location.
\item {\bfseries{Latitude}}\+: One can input the latitude of the location.
\item {\bfseries{Sensors}}\+: One can chose the temperature sensor i.\+e., none, B\+M\+E22, or D\+H\+T22.
\item {\bfseries{S\+D\+S011 ID}}\+: One can input the hard-\/coded serial number from the sds011 dust sensor.
\item {\bfseries{Licese Name}}\+: One can chose the license type here.
\item {\bfseries{Legal Notice}}\+: One can chose the license owner of the data.
\item {\bfseries{Submit (Speichern)}}\+: Button to submit the new configuration to E\+S\+P32, which will reset it and new entities will be created again.
\end{DoxyEnumerate}

The menu has the following items\+:
\begin{DoxyEnumerate}
\item {\bfseries{H\+O\+ME}}\+: is the home of the configuration page. It shows the different parameters of the current connection.
\item {\bfseries{Update}}\+: is used to update the firmware over O\+TA.
\item {\bfseries{Configure}}\+: is the configuration page as shown in \mbox{\hyperlink{index_Fig-9}{Fig-\/9}}.
\item {\bfseries{Reset...}}\+: this will reset the board.
\item {\bfseries{Disconnect}}\+: will disconnect the system from the current Wi\+Fi.
\item {\bfseries{Open S\+S\+I\+Ds}}\+: shows all the used/configured Wi\+Fi S\+S\+I\+Ds.
\item {\bfseries{Configure new AP}}\+: used to connect to a new Wi\+Fi. There it show all the available Wi\+Fi routers and one can connect to one having S\+S\+ID and Password.~\newline
 {\bfseries{Note\+: The config page sometimes takes quite long to load (esp. on a mobile phone). Patience needed!!!}}  \label{index_Fig-9}%
\Hypertarget{index_Fig-9}%
  
\begin{DoxyImage}
\includegraphics[width=400px]{configr}
\doxyfigcaption{Configuration Page}
\end{DoxyImage}

\end{DoxyEnumerate}\hypertarget{index_mdns}{}\subsection{M\+D\+NS}\label{index_mdns}
A domain name service is used instead of typing IP. It is configure according to hardware ID of E\+S\+P32. One can open configuration page using \href{http://}{\texttt{ http\+://}}\mbox{[}ID\mbox{]}.local/.\hypertarget{index_dailyreboot}{}\subsection{Daily Reboot}\label{index_dailyreboot}
There is a daily reboot at time defined by (\mbox{\hyperlink{main_8h_a423126ae538bf9e83239e46e46cf1df9}{T\+I\+M\+E\+T\+O\+R\+E\+B\+O\+OT}}) if it is enabled by (\mbox{\hyperlink{main_8h_a18bdfe88e9f5895863740df7ad801109}{E\+N\+A\+B\+L\+E\+\_\+\+D\+A\+I\+L\+Y\+\_\+\+R\+E\+B\+O\+OT}}). This is incoporated as a precaution.\hypertarget{index_intervals}{}\subsection{Sensing and Sending Intervals}\label{index_intervals}
The temperature and dust values are sensed at an interval of (\mbox{\hyperlink{main_8h_aef6021251fa63b1e73a98864b809904e}{S\+T\+A\+T\+S\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}), and posted at the interval of (\mbox{\hyperlink{main_8h_aef6021251fa63b1e73a98864b809904e}{S\+T\+A\+T\+S\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}) if H\+T\+TP server is available, location data is given and if the server entities are created seccessfully. The sensed values are also sent to madavi and send2luftdaten servers at the interval of (S\+E\+N\+D2\+M\+A\+D\+A\+V\+I\+\_\+\+I\+N\+T\+E\+R\+V\+AL) and the interval of (\mbox{\hyperlink{main_8h_a7a63477c73052322ebb3ea6f1bfe7e1d}{S\+E\+N\+D2\+L\+U\+F\+T\+D\+A\+T\+E\+N\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}), if (\mbox{\hyperlink{main_8h_a18d121e3e45bfea386799ad36fb70b5f}{E\+N\+A\+B\+L\+E\+\_\+\+S\+E\+N\+D2\+M\+A\+D\+A\+VI}}) and (\mbox{\hyperlink{main_8h_ace6bf58c74189bcd567c1135baaa9505}{E\+N\+A\+B\+L\+E\+\_\+\+S\+E\+N\+D2\+L\+U\+F\+T\+D\+A\+T\+EN}}) is enabled respectively. \hypertarget{index_create}{}\subsection{Modelling and Creating Entities}\label{index_create}
Before posting the observations of dust and temperature sensors, different type of entities need to be created on the server using H\+T\+TP methods. Usually, the the entities which are created consists of\+: Thing, Sensor, Location, Obervedproperty, Datastream and Observation. The nomenclature used for the creation can be seen in the presentation \href{modelling.pdf}{\texttt{ {\bfseries{Modelling the Smart\+A\+Qnet Database}}}}. Some of the entities are created from scratch, while some are only patched if already exist. For example, the \char`\"{}\+Thing\char`\"{} is patched with location and properties. The \char`\"{}\+Datastream\char`\"{} is alse needs to be patched with the properties. The sequence of the creation of different entities and how they are patched with required location and/or properties can be seen in the flowchart \href{CreateEntitiesFlow.pdf}{\texttt{ {\bfseries{Create Server Entities Flow}}}}. Entities are created using particular J\+S\+ON messages which are transmitted using H\+T\+TP methods. The seccessfull creation indicates only the status code of 200 and 201, and based on this a boolean response is returned. The observations are then posted at the interval of (\mbox{\hyperlink{main_8h_aef6021251fa63b1e73a98864b809904e}{S\+T\+A\+T\+S\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}) and if (\mbox{\hyperlink{main_8h_af58473239b566ebd1187b4cc8c71e97d}{E\+N\+A\+B\+L\+E\+\_\+\+S\+E\+N\+D2\+F\+R\+O\+ST}}) is enabled. The Software property version can be controlled by the constant (\mbox{\hyperlink{main_8h_af06baee05280c189592215d5ea08e7ef}{sw\+\_\+version}}) and timestamp is assign on the fly, while the harware revision date is controlled by using the constant (\mbox{\hyperlink{main_8h_acbd8a4cec684c263a6cc312c70d45ef3}{hw\+\_\+date}}).~\newline
 The Table \doxytablelink{index_Tab-2}{Tab-\/2} shows which entities are to be created and which entities are patched? The entities are created if they does not exist and patched with different properties if they already exist.

 \begin{center} \hypertarget{index_Tab-2}{}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{4}{|X[-1]}|}
\caption{Entities Creation \& Patching}\label{index_Tab-2}\\
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Entity }&\cellcolor{\tableheadbgcolor}\textbf{ Type }&\cellcolor{\tableheadbgcolor}\textbf{ Patched? }&\cellcolor{\tableheadbgcolor}\textbf{ Patched With? }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Entity }&\cellcolor{\tableheadbgcolor}\textbf{ Type }&\cellcolor{\tableheadbgcolor}\textbf{ Patched? }&\cellcolor{\tableheadbgcolor}\textbf{ Patched With? }\\\cline{1-4}
\endhead
Thing &None &Yes &Location, Software Version \\\cline{1-4}
Location &None &No &None \\\cline{1-4}
\multirow{3}{*}{Sensor }&S\+D\+S011 &No &None \\\cline{2-4}
&B\+M\+E280 &No &None \\\cline{2-4}
&D\+H\+T22 &No &None \\\cline{1-4}
\multirow{5}{*}{Observed Properties }&P\+M2.\+5 &No &None \\\cline{2-4}
&P\+M10 &No &None \\\cline{2-4}
&Temperature &No &None \\\cline{2-4}
&Pressure &No &None \\\cline{2-4}
&Humidity &No &None \\\cline{1-4}
\multirow{5}{*}{Observations }&P\+M2.\+5 &No &None \\\cline{2-4}
&P\+M10 &No &None \\\cline{2-4}
&Temperature &No &None \\\cline{2-4}
&Pressure &No &None \\\cline{2-4}
&Humidity &No &None \\\cline{1-4}
\multirow{5}{*}{Datastreams }&P\+M2.\+5 &Yes &Software Version, License \\\cline{2-4}
&P\+M10 &Yes &Software Version, License \\\cline{2-4}
&Temperature &Yes &Software Version, License \\\cline{2-4}
&Pressure &Yes &Software Version, License \\\cline{2-4}
&Humidity &Yes &Software Version, License \\\cline{1-4}
\end{longtabu}
\end{center} \hypertarget{index_flowchart}{}\subsection{Flow\+Charts}\label{index_flowchart}
The project work-\/flow can be see in the \href{StatemachineFlow.pdf}{\texttt{ {\bfseries{flowchart}}}}. Also there is a another flowchart and explanation regarding \char`\"{}\+Inside Auto\+Connect\+::begin\char`\"{} function at \href{https://hieromon.github.io/AutoConnect/lsbegin.html}{\texttt{ https\+://hieromon.\+github.\+io/\+Auto\+Connect/lsbegin.\+html}} .~\newline
 There is a another flowchart and explanation regarding creating \& patching different S\+A\+QN Database Entities on the server using J\+S\+ON messages, as shown in \href{CreateEntitiesFlow.pdf}{\texttt{ {\bfseries{Create Server Entities Flow}}}}.~\newline
 There creation of entities implements O\+GC like A\+PI i.\+e. \href{https://developers.sensorup.com/docs/\#sensorthingsAPISensing}{\texttt{ https\+://developers.\+sensorup.\+com/docs/\#sensorthings\+A\+P\+I\+Sensing}}).~\newline
\hypertarget{index_const}{}\subsection{Important Constants}\label{index_const}
Have a look at the following constants to configure them accordingly. These constants needs to be configured before the firmware is uploaded.
\begin{DoxyItemize}
\item in the file \mbox{\hyperlink{my_auto_connect_8h}{my\+Auto\+Connect.\+h}}
\begin{DoxyItemize}
\item \mbox{\hyperlink{my_auto_connect_8h_ab8e5b92436ed19ff04454974ca9b5140}{W\+I\+F\+I\+\_\+\+R\+E\+B\+O\+O\+T\+\_\+\+T\+I\+M\+E\+O\+UT}} set Timeout to search Wi\+Fi already configured
\end{DoxyItemize}
\item in the file \mbox{\hyperlink{create__json_8h}{create\+\_\+json.\+h}}
\begin{DoxyItemize}
\item \mbox{\hyperlink{create__json_8h_ab1d2a71062488a1b8d2f9129682a42b9}{S\+O\+F\+T\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON}} Software version of the crowdsensor
\end{DoxyItemize}
\item in the file \mbox{\hyperlink{sensor_8h}{sensor.\+h}}
\begin{DoxyItemize}
\item \mbox{\hyperlink{sensor_8h_a661d236dd49f3aef3a2cf46cf6a1405e}{D\+H\+T\+\_\+\+P\+IN}} 21, set D\+H\+T22 sensor communication pin
\item \mbox{\hyperlink{sensor_8h_a9f6149e98e70e1d5be5f0f33921cb7d7}{B\+M\+E\+\_\+\+A\+D\+DR}} 0x77, set B\+M\+E280 I2C Address 0x77 for Red, 0x76 for Purple
\item \mbox{\hyperlink{sensor_8h_ad9e594e426bce833af06dea308dbbf9a}{B\+M\+E\+\_\+\+S\+DA}}, set B\+M\+E280 I2C S\+DA pin
\item \mbox{\hyperlink{sensor_8h_a5db75d8e5f3deda546603b949c520446}{B\+M\+E\+\_\+\+S\+CL}}, set B\+M\+E280 I2C S\+CL pin
\item \mbox{\hyperlink{sensor_8h_a7130f8006502cdaa31094baa3f4dd3fa}{S\+D\+S011\+\_\+\+T\+XD}}, set S\+D\+S011 T\+XD pin is connected at R\+XD of Serial2 Object
\item \mbox{\hyperlink{sensor_8h_ad2b404eb4de525cef31b8413f5d14b13}{S\+D\+S011\+\_\+\+R\+XD}}, set S\+D\+S011 R\+XD pin is connected at T\+XD of Serial2 Object (no need to physically connect)
\end{DoxyItemize}
\item in the file \mbox{\hyperlink{main_8h}{main.\+h}}
\begin{DoxyItemize}
\item \mbox{\hyperlink{main_8h_aa14dc39d52ab121ceb570f1a265385e0}{F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON}} controls the hard-\/coded firmware version of the code
\item \mbox{\hyperlink{main_8h_af06baee05280c189592215d5ea08e7ef}{sw\+\_\+version}} describes the software version of the Thing\textquotesingle{}s software properties
\item \mbox{\hyperlink{main_8h_acbd8a4cec684c263a6cc312c70d45ef3}{hw\+\_\+date}} describes the hardware revision timestamp of the Thing\textquotesingle{}s hardware properties
\item \mbox{\hyperlink{main_8h_acbb11c1e34784cf1e3147029f942bfd6}{B\+A\+S\+E\+\_\+\+U\+RL}} H\+T\+TP Server Address
\item R\+E\+L\+E\+A\+SE controls the debugging prints and \mbox{\hyperlink{main_8h_a7e7232f278193dd8684f973ee70ef3f5}{M\+Y\+\_\+\+D\+E\+B\+UG}}
\item \mbox{\hyperlink{main_8h_af58473239b566ebd1187b4cc8c71e97d}{E\+N\+A\+B\+L\+E\+\_\+\+S\+E\+N\+D2\+F\+R\+O\+ST}}, set switch for sending to F\+R\+O\+ST teco server
\item \mbox{\hyperlink{main_8h_a71a7a65f7dd7e8f3ea14942213cd8217}{S\+E\+N\+S\+O\+R\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}, set intervall of reading sensor data in ms
\item \mbox{\hyperlink{main_8h_aef6021251fa63b1e73a98864b809904e}{S\+T\+A\+T\+S\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}, set intervall of showing statistical/informative screen multiple of (\mbox{\hyperlink{main_8h_a71a7a65f7dd7e8f3ea14942213cd8217}{S\+E\+N\+S\+O\+R\+\_\+\+I\+N\+T\+E\+R\+V\+AL}})
\item \mbox{\hyperlink{main_8h_a18d121e3e45bfea386799ad36fb70b5f}{E\+N\+A\+B\+L\+E\+\_\+\+S\+E\+N\+D2\+M\+A\+D\+A\+VI}}, set switch for sending to madavi api
\item \mbox{\hyperlink{main_8h_ace6bf58c74189bcd567c1135baaa9505}{E\+N\+A\+B\+L\+E\+\_\+\+S\+E\+N\+D2\+L\+U\+F\+T\+D\+A\+T\+EN}}, set switch for sending to luftdaten api
\item \mbox{\hyperlink{main_8h_a6f4b34eadf0db60197dce3a76e0d6632}{S\+E\+N\+D2\+M\+A\+D\+A\+V\+I\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}, set intervall of sending to madavi api in ms
\item \mbox{\hyperlink{main_8h_a7a63477c73052322ebb3ea6f1bfe7e1d}{S\+E\+N\+D2\+L\+U\+F\+T\+D\+A\+T\+E\+N\+\_\+\+I\+N\+T\+E\+R\+V\+AL}}, set intervall of sending to madavi api in ms
\item \mbox{\hyperlink{main_8h_a18bdfe88e9f5895863740df7ad801109}{E\+N\+A\+B\+L\+E\+\_\+\+D\+A\+I\+L\+Y\+\_\+\+R\+E\+B\+O\+OT}}, set enable daily reboot at specific time
\item \mbox{\hyperlink{main_8h_a423126ae538bf9e83239e46e46cf1df9}{T\+I\+M\+E\+T\+O\+R\+E\+B\+O\+OT}}, set time when to do daily reboot (hour of time of day for reboot goes here) //\+T\+O\+DO set proper time
\item \mbox{\hyperlink{main_8h_a8a1756fdd61bca61d188ce01ece876b9}{A\+P\+M\+O\+D\+E\+\_\+\+R\+E\+B\+O\+O\+T\+\_\+\+T\+I\+M\+E\+O\+UT}}, set intervall of auto reboot while in access point mode (config mode) in ms (6000000ms is 10min). autoreboot while in ap mode only occurs if no device is connected to the esp32
\item \mbox{\hyperlink{main_8h_ad8124687637087b9096f96b838f93400}{N\+T\+P\+\_\+\+T\+I\+M\+E\+O\+U\+T\+\_\+\+W\+A\+IT}}, set Timeout for N\+TP timeout (s) in wait\+For\+Sync()
\item \mbox{\hyperlink{main_8h_a953ca2c42ce0015ef8c2965e3b395100}{C\+R\+E\+D\+E\+N\+T\+I\+A\+L\+\_\+\+O\+F\+F\+S\+ET}}, Specified the N\+VS offset if the user data exists.
\item \mbox{\hyperlink{main_8h_aa585e8beebc12dba62dbdc15b8cf1f71}{data1\+\_\+url\+\_\+cc0}} defines the Smart A\+Qnet Licese for public domain
\item \mbox{\hyperlink{main_8h_a35c49e7e622aac3342eabee213dd4bfc}{data1\+\_\+url\+\_\+ccby}} defines the Smart A\+Qnet Licese property
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{index_prereq}{}\section{Pre-\/requisites}\label{index_prereq}

\begin{DoxyEnumerate}
\item Arrange the required \mbox{\hyperlink{index_hw_sec}{Hardware}} and carry out the \mbox{\hyperlink{index_wiring}{Wirings}}.
\item Install the the \mbox{\hyperlink{index_arduinoide}{Arduino I\+DE}}
\item Install the \mbox{\hyperlink{index_boardlib}{E\+S\+P32 Arduino core}}
\item Install the recommended \mbox{\hyperlink{index_lib}{Required Libraries}}
\end{DoxyEnumerate}\hypertarget{index_hw_sec}{}\section{Hardware}\label{index_hw_sec}
It consists of E\+S\+P32 microcontrollers, which is \char`\"{}\+Hel\+Tec Wi\+Fi Kit 32\char`\"{} -\/---$>$ \href{https://heltec.org/project/wifi-kit-32/}{\texttt{ https\+://heltec.\+org/project/wifi-\/kit-\/32/}} Following board, hardware and libraries are used to develop this project.\hypertarget{index_peri}{}\subsection{Peripherals}\label{index_peri}

\begin{DoxyEnumerate}
\item O\+L\+ED Built-\/in O\+L\+ED Display -\/---$>$ \href{https://heltec.org/project/wifi-kit-32/}{\texttt{ https\+://heltec.\+org/project/wifi-\/kit-\/32/}}
\item S\+D\+S011 Sensor -\/---$>$ \href{https://learn.watterott.com/sensors/sds011/}{\texttt{ https\+://learn.\+watterott.\+com/sensors/sds011/}}
\item B\+M\+E280 Sensor for Humidity and Temperature -\/---$>$ \href{https://www.ebay.de/itm/3-3V-Bosch-BME280-Barometer-Luftdruck-Luftfeuchte-Sensor-Modul-BMP280-SPI-I2C-/263548911232}{\texttt{ https\+://www.\+ebay.\+de/itm/3-\/3\+V-\/\+Bosch-\/\+B\+M\+E280-\/\+Barometer-\/\+Luftdruck-\/\+Luftfeuchte-\/\+Sensor-\/\+Modul-\/\+B\+M\+P280-\/\+S\+P\+I-\/\+I2\+C-\//263548911232}} or \href{https://eckstein-shop.de/SparkFun-Barometric-Pressure-Sensor-Breakout-MPL115A1?curr=EUR&gclid=Cj0KCQjww7HsBRDkARIsAARsIT6QsuuszbyaQ4r1DLuYTOT5pgwMfpIhRTtwQKAA2vtHkuHGrBZa9JQaAo-gEALw_wcB}{\texttt{ https\+://eckstein-\/shop.\+de/\+Spark\+Fun-\/\+Barometric-\/\+Pressure-\/\+Sensor-\/\+Breakout-\/\+M\+P\+L115\+A1?curr=\+E\+U\+R\&gclid=\+Cj0\+K\+C\+Qjww7\+Hs\+B\+R\+Dk\+A\+R\+Is\+A\+A\+Rs\+I\+T6\+Qsuuszbya\+Q4r1\+D\+Lu\+Y\+T\+O\+T5pgw\+Mfp\+Ih\+R\+Ttw\+Q\+K\+A\+A2vt\+Hku\+H\+Gr\+B\+Za9\+J\+Qa\+Ao-\/g\+E\+A\+Lw\+\_\+wcB}}
\item D\+H\+T22 Sensor for Temperature and Humidity -\/---$>$ \href{https://www.sparkfun.com/products/10167}{\texttt{ https\+://www.\+sparkfun.\+com/products/10167}}
\end{DoxyEnumerate}\hypertarget{index_arduinoide}{}\subsection{Arduino I\+DE}\label{index_arduinoide}
The Arduino I\+DE Version 1.\+8 or later is needed. Please install from the official Arduino I\+DE download page. This step is not required if you already have the most recent version.\hypertarget{index_dialout}{}\subsubsection{Pyserial}\label{index_dialout}
If you use linux, you have to install the python pyserial package and add the current user to the dialout group\+: 
\begin{DoxyPre}{\ttfamily 
 sudo apt install python-pip
 pip install pyserial
 sudo /usr/sbin/usermod -a -G dialout <MY\_USER\_NAME>
 }\end{DoxyPre}
\hypertarget{index_boardlib}{}\subsubsection{E\+S\+P32 Arduino core}\label{index_boardlib}
Also, to apply Auto\+Connect to E\+S\+P32, the arduino-\/esp32 core provided by Espressif is needed. Stable 1.\+0.\+3 or required and the latest release is recommended. Install third-\/party platform using the Boards Manager of Arduino I\+DE (for instructions see here\+: \href{https://github.com/espressif/arduino-esp32/blob/master/docs/arduino-ide/boards_manager.md}{\texttt{ https\+://github.\+com/espressif/arduino-\/esp32/blob/master/docs/arduino-\/ide/boards\+\_\+manager.\+md}}). You can add multiple U\+R\+Ls into Additional Board Manager U\+R\+Ls field, separating them with commas. Package U\+RL is \href{https://dl.espressif.com/dl/package_esp32_index.json}{\texttt{ https\+://dl.\+espressif.\+com/dl/package\+\_\+esp32\+\_\+index.\+json}} for E\+S\+P32.\hypertarget{index_lib}{}\subsubsection{Required Libraries}\label{index_lib}
Following are the commonly used libraries, and should be added in the Arduino I\+DE, before the compiling.
\begin{DoxyEnumerate}
\item F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON 0.\+8.\+6.\+1 onwards
\begin{DoxyItemize}
\item E\+S\+P32 Board by Espressif Systems v1.\+0.\+3 (\href{https://github.com/espressif/arduino-esp32}{\texttt{ https\+://github.\+com/espressif/arduino-\/esp32}})
\item Adafruit Unified Sensor by Adafruit v1.\+0.\+3 (\href{https://github.com/adafruit/Adafruit_Sensor}{\texttt{ https\+://github.\+com/adafruit/\+Adafruit\+\_\+\+Sensor}})
\item Adafruit B\+M\+E280 Library by Adafruit v1.\+0.\+8 (\href{https://github.com/adafruit/Adafruit_BME280_Library}{\texttt{ https\+://github.\+com/adafruit/\+Adafruit\+\_\+\+B\+M\+E280\+\_\+\+Library}})
\item Arduino\+Json by Benuit Blanchon v 6.\+12.\+0 (\href{https://arduinojson.org/?utm_source=meta&utm_medium=library.properties}{\texttt{ https\+://arduinojson.\+org/?utm\+\_\+source=meta\&utm\+\_\+medium=library.\+properties}}) (I\+M\+P\+O\+R\+T\+A\+NT\+: Arduino\+I\+DE installs the version (v6), but it doesnt work with this one.)
\item D\+HT sensor library by Adafruit v1.\+3.\+4 (\href{https://github.com/adafruit/DHT-sensor-library}{\texttt{ https\+://github.\+com/adafruit/\+D\+H\+T-\/sensor-\/library}})
\item Page\+Builder by Hieromon Ikasamo v1.\+3.\+4 (\href{https://github.com/Hieromon/PageBuilder}{\texttt{ https\+://github.\+com/\+Hieromon/\+Page\+Builder}})
\item eztime by Rop Gonggrijp v0.\+7.\+10 (\href{https://github.com/ropg/ezTime}{\texttt{ https\+://github.\+com/ropg/ez\+Time}})
\item u8g2 by oliver v2.\+26.\+14 (\href{https://github.com/olikraus/u8g2}{\texttt{ https\+://github.\+com/olikraus/u8g2}})
\item Q\+R\+Code by Richard Moore v0.\+0.\+1 (\href{https://github.com/ricmoo/qrcode/}{\texttt{ https\+://github.\+com/ricmoo/qrcode/}})
\item Auto\+Connect by Hieromon Ikasamo v1.\+1.\+3 (\href{https://github.com/Hieromon/AutoConnect.git}{\texttt{ https\+://github.\+com/\+Hieromon/\+Auto\+Connect.\+git}})
\item name=S\+D\+S011 sensor Library by R. Zschiegner v0.\+0.\+6 (\href{https://github.com/ricki-z/SDS011}{\texttt{ https\+://github.\+com/ricki-\/z/\+S\+D\+S011}}). This library is kept in src/lib/\+S\+D\+S011 folder. Even the library is updated on the github. But when tried to installed from library manager it is not installed properly for esp32.
\end{DoxyItemize}
\item F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON 0.\+8.\+6 and older
\begin{DoxyItemize}
\item Adafruit Unified Sensor by Adafruit v1.\+0.\+3 (\href{https://github.com/adafruit/Adafruit_Sensor}{\texttt{ https\+://github.\+com/adafruit/\+Adafruit\+\_\+\+Sensor}})
\item Adafruit B\+M\+E280 Library by Adafruit v1.\+0.\+8 (\href{https://github.com/adafruit/Adafruit_BME280_Library}{\texttt{ https\+://github.\+com/adafruit/\+Adafruit\+\_\+\+B\+M\+E280\+\_\+\+Library}})
\item Arduino\+Json by Benuit Blanchon v 5.\+13.\+5 (\href{https://arduinojson.org/?utm_source=meta&utm_medium=library.properties}{\texttt{ https\+://arduinojson.\+org/?utm\+\_\+source=meta\&utm\+\_\+medium=library.\+properties}}) (I\+M\+P\+O\+R\+T\+A\+NT\+: Arduino\+I\+DE installs the version (v6), but it doesnt work with this one.)
\item D\+HT sensor library by Adafruit v1.\+3.\+4 (\href{https://github.com/adafruit/DHT-sensor-library}{\texttt{ https\+://github.\+com/adafruit/\+D\+H\+T-\/sensor-\/library}})
\item Page\+Builder by Hieromon Ikasamo v1.\+3.\+4 (\href{https://github.com/Hieromon/PageBuilder}{\texttt{ https\+://github.\+com/\+Hieromon/\+Page\+Builder}})
\item eztime by Rop Gonggrijp v0.\+7.\+10 (\href{https://github.com/ropg/ezTime}{\texttt{ https\+://github.\+com/ropg/ez\+Time}})
\item u8g2 by oliver v2.\+25.\+10 (\href{https://github.com/olikraus/u8g2}{\texttt{ https\+://github.\+com/olikraus/u8g2}})
\item Autoconnect lib (is already in src folder, no need to install) \mbox{[}M\+O\+D\+I\+F\+I\+ED\mbox{]} \mbox{[}till F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON \char`\"{}0.\+8.\+6 pre\char`\"{}\mbox{]}
\item S\+D\+S011 sensor Library by R. Zschiegner (already in src folder, no need to install) \mbox{[}M\+O\+D\+I\+F\+I\+ED\mbox{]} \mbox{[}till F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON \char`\"{}0.\+8.\+6 pre\char`\"{}\mbox{]}
\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{index_upload}{}\subsection{Firmware Uploading}\label{index_upload}
Following steps are recommended to upload the firmware before handing over the new crowd-\/sensor node.
\begin{DoxyEnumerate}
\item To erase flash completely before delivering the product\+: \char`\"{}\+C\+:\textbackslash{}\+Users\textbackslash{}\+Sajjad\textbackslash{}\+Documents\textbackslash{}\+Arduino\+Data\textbackslash{}packages\textbackslash{}esp32\textbackslash{}tools\textbackslash{}esptool\+\_\+py$>$esptool.\+py -\/-\/chip esp32 erase\+\_\+flash\char`\"{} from the command terminal.
\item Upload the firmware using the Ardiuno I\+DE
\end{DoxyEnumerate}\hypertarget{index_wiring}{}\section{Wirings}\label{index_wiring}

\begin{DoxyEnumerate}
\item O\+L\+ED Display (built-\/in)~\newline
 The display is built-\/in already with the E\+S\+P32 board through I2C. The I2C address is 0x3c, S\+DA pin is 4, S\+CL pin is 15, and R\+ST pin is 16. They are already connected. The custom fonts are generated using online Font Generatore from -\/---$>$ \href{http://oleddisplay.squix.ch/\#/home}{\texttt{ http\+://oleddisplay.\+squix.\+ch/\#/home}}. Don\textquotesingle{}t need hardware wiring, just require pin definitions, as\+:
\begin{DoxyItemize}
\item \mbox{\hyperlink{main_8h_ac5d957e4fd3dc11cd97a54cf9ca057a4}{R\+ST}}, set Reset P\+IN of O\+L\+ED Module
\item \mbox{\hyperlink{main_8h_a7dfa2c4cfbfcba36416046052e7943e8}{O\+L\+E\+D\+\_\+\+A\+D\+DR}}, The I2C address of the S\+S\+D1306 O\+L\+DE
\item \mbox{\hyperlink{main_8h_afbf31d4d5bad7fd61418b8b8036df96c}{O\+L\+E\+D\+\_\+\+S\+DA}}, The S\+DA pin of the S\+S\+D1306 O\+L\+DE
\item \mbox{\hyperlink{main_8h_ad3ddbbb48cad4c34406916e199b89122}{O\+L\+E\+D\+\_\+\+S\+CL}}, The S\+CL pin of the S\+S\+D1306 O\+L\+DE
\end{DoxyItemize}
\item S\+D\+S011 Dust Sensor~\newline
 One has to\+:
\begin{DoxyItemize}
\item connect T\+XD of Dust Sensor S\+D\+S011 to Pin 13 of E\+S\+P32 (E\+S\+P-\/\+RX)
\item connect 5V of Dust Sensor S\+D\+S011 to Pin 5V of E\+S\+P32
\item connect G\+ND of Dust Sensor S\+D\+S011 to Pin G\+ND of E\+S\+P32
\end{DoxyItemize}
\item B\+M\+E280 Sensor for Humidity and Temperature~\newline

\begin{DoxyItemize}
\item connect S\+CK of B\+M\+E280 sensor to Pin 22 of E\+S\+P32 (E\+S\+P-\/\+S\+CL)
\item connect S\+DA of B\+M\+E280 sensor to Pin 21 of E\+S\+P32 (E\+S\+P-\/\+S\+DA)
\item connect V\+CC of B\+M\+E280 sensor to 3V3 of E\+S\+P32
\item connect G\+ND of B\+M\+E280 sensor to G\+ND of E\+S\+P32
\item the I2C address for different B\+M\+E280 (purple/red) can be configure in \mbox{\hyperlink{sensor_8h}{sensor.\+h}} using \mbox{\hyperlink{sensor_8h_a9f6149e98e70e1d5be5f0f33921cb7d7}{B\+M\+E\+\_\+\+A\+D\+DR}} constant
\end{DoxyItemize}
\item D\+H\+T22 Sensor for Temperature and Humidity (if B\+M\+E280 is not used)~\newline
 Look at the sensor from the front (grid shows in your direction), put the pins facing down, start counting the pins from left (pin1) to right (pin4). pin 3 is not connected.~\newline
 One has to\+:
\begin{DoxyItemize}
\item Connect pin 1 of D\+H\+T22 sensor (on the left) to 3V3 of E\+S\+P32
\item Connect pin 2 of D\+H\+T22 sensor to Pin 21 of E\+S\+P32 (data)
\item Connect pin 4 of D\+H\+T22 sensor (on the right) to G\+ND of E\+S\+P32
\item Connect a resistor in range 4.\+7k to 10k from pin 2 (data) to pin 1 (power) of the sensor
\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{index_knownbugs}{}\section{Known Bugs}\label{index_knownbugs}
There are following bugs and discrepensies that needs to be take care off.
\begin{DoxyEnumerate}
\item The config page sometimes takes quite long to load (esp. on a mobile phone). Patience needed!!!
\item Sometimes, the Auto\+Connect does not recover the earlier configured credentials after the reset. This is happend in rare situations with some internet routers. Similar issure reported at\+: \href{https://github.com/espressif/arduino-esp32/issues/1464}{\texttt{ https\+://github.\+com/espressif/arduino-\/esp32/issues/1464}}
\item Sometimes, the E\+Z\+Time Library can not synchronize with the internet time. This is happend rarely. Sometime, increasing \mbox{\hyperlink{main_8h_ad8124687637087b9096f96b838f93400}{N\+T\+P\+\_\+\+T\+I\+M\+E\+O\+U\+T\+\_\+\+W\+A\+IT}} constant\textquotesingle{}s time, may solve the issue. Similar issue is reported at\+: \href{https://github.com/ropg/ezTime/issues/40}{\texttt{ https\+://github.\+com/ropg/ez\+Time/issues/40}}
\item Sometimes, while posting different observations to a server, there are some postings shows negative http status, like\+: H\+T\+T\+P\+C\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+R\+E\+F\+U\+S\+ED (-\/1) and H\+T\+T\+P\+C\+\_\+\+E\+R\+R\+O\+R\+\_\+\+R\+E\+A\+D\+\_\+\+T\+I\+M\+E\+O\+UT (-\/11) as traced in the H\+T\+T\+P\+Client library. This means, when there is -\/1 H\+T\+TP Status, then the observation is not being posted. Following are some tests that shows the percentage of these errors.
\begin{DoxyEnumerate}
\item {\bfseries{Duration}}\+:~\newline
 From 2020-\/01-\/19T03\+:02\+:38.\+000Z to 2020-\/01-\/20T04\+:14\+:02.\+000Z~\newline
 Result\+: 1 day, 1 hour, 11 minutes and 24 seconds= 90,684 seconds~\newline
 {\bfseries{Analysis}}\+:~\newline
 Reset occurrences\+: 3 i.\+e. routine resets at 4\+:00~\newline
 \mbox{[}A\+PI\mbox{]} Post Observation... counts 43429 i.\+e. 8685.\+8 observation set of five~\newline
 \mbox{[}A\+PI\mbox{]} H\+T\+TP Code\+: -\/1x counts 339~\newline
 i.\+e. 339/43429x100=0.\+78\%~\newline

\item {\bfseries{Duration}}\+:~\newline
 From 2020-\/01-\/22T09\+:34\+:19.\+000Z to 2020-\/01-\/25T00\+:03\+:57.\+000Z~\newline
 Result\+: 2 days, 14 hours, 29 minutes and 38 seconds = 224,978 seconds~\newline
 {\bfseries{Analysis}}\+:~\newline
 Reset occurrences\+: 2 i.\+e. routine resets at 4\+:00~\newline
 \mbox{[}A\+PI\mbox{]} Post Observation... counts 111655~\newline
 \mbox{[}A\+PI\mbox{]} H\+T\+TP Code\+: -\/1x counts 198~\newline
 i.\+e. 198/111655x100 = 0.\+17\%~\newline

\item {\bfseries{Duration}}\+:~\newline
 From 2020-\/01-\/26T22\+:17\+:08.\+000Z to 2020-\/01-\/27T20\+:01\+:32.\+000Z~\newline
 Result\+: 21 hours, 44 minutes and 24 seconds=78,264 seconds~\newline
 {\bfseries{Analysis}}\+:~\newline
 Reset occurrences\+: 1 i.\+e. routine resets at 4\+:00~\newline
 \mbox{[}A\+PI\mbox{]} Post Observation... counts 38645~\newline
 \mbox{[}A\+PI\mbox{]} H\+T\+TP Code\+: -\/1x counts 149~\newline
 i.\+e. 149/38645x100 = 0.\+38\%~\newline

\item {\bfseries{Duration}}\+:~\newline
 From 2020-\/01-\/28T21\+:01\+:21.\+000Z to 2020-\/01-\/30T11\+:58\+:11.\+000Z~\newline
 Result\+: 1 day, 14 hours, 56 minutes and 50 seconds=140,210 seconds~\newline
 {\bfseries{Analysis}}\+:~\newline
 Reset occurrences\+: 2 i.\+e. routine resets at 4\+:00~\newline
 \mbox{[}A\+PI\mbox{]} Post Observation... counts 69315~\newline
 \mbox{[}A\+PI\mbox{]} H\+T\+TP Code\+: -\/1x counts 225~\newline
 i.\+e. 225 / 69315 x 100 = 0.\+32\%~\newline

\item {\bfseries{Duration}}\+:~\newline
 From 2020-\/02-\/13T18\+:45\+:43.\+000Z to 2020-\/02-\/15T16\+:52\+:03.\+000Z~\newline
 Result\+: 1 day, 22 hours, 6 minutes and 20 seconds = 165,980 seconds~\newline
 {\bfseries{Analysis}}\+:~\newline
 Reset occurrences\+: 2 i.\+e. routine resets at 4\+:00~\newline
 \mbox{[}A\+PI\mbox{]} Post Observation... counts 80725~\newline
 \mbox{[}A\+PI\mbox{]} H\+T\+TP Code\+: -\/1x counts 191~\newline
 i.\+e. 191 / 80725 x 100 = 0.\+22\%~\newline

\end{DoxyEnumerate}
\end{DoxyEnumerate}\hypertarget{index_testing}{}\subsection{Some Observations}\label{index_testing}

\begin{DoxyEnumerate}
\item I tested it with long testing. And had the following observations (Ticket\#2157).
\begin{DoxyItemize}
\item From \char`\"{}phenomenon\+Time\char`\"{}\+:\char`\"{}2019-\/12-\/31\+T01\+:29\+:44.\+000\+Z\char`\"{} to \char`\"{}phenomenon\+Time\char`\"{}\+:\char`\"{}2019-\/12-\/31\+T17\+:37\+:14.\+000\+Z\char`\"{}. There has been only 27 counts for \char`\"{}\mbox{[}\+A\+P\+I\mbox{]} H\+T\+T\+P Code\+: -\/\char`\"{}
\item Then, there is an interruption on the internet. I noticed that my browser was not responding and there continuous -\/1 or -\/11 error.
\item There has been 64 counts for \char`\"{}\mbox{[}\+A\+P\+I\mbox{]} H\+T\+T\+P Code\+: -\/\char`\"{} i.\+e. another 37 counts just between \char`\"{}phenomenon\+Time\char`\"{}\+:\char`\"{}2019-\/12-\/31\+T17\+:37\+:24.\+000\+Z\char`\"{} and \char`\"{}phenomenon\+Time\char`\"{}\+:\char`\"{}2019-\/12-\/31\+T17\+:43\+:13.\+000\+Z\char`\"{}.
\item The queries \mbox{[}\mbox{\hyperlink{main_8h_acbb11c1e34784cf1e3147029f942bfd6}{B\+A\+S\+E\+\_\+\+U\+RL}}\mbox{]}/\+Datastreams(\textquotesingle{}saqn\%3Ads\%3Ace4fe57\textquotesingle{})/\+Observations?\$count=True\&\$filter=phenomenon\+Time\%20ge\%202019-\/12-\/31T01\+:29\+:44.\+000Z\%20and\%20phenomenon\+Time\%20le\%202019-\/12-\/31T02\+:03\+:53.\+000Z\&\$orderby=phenomenon\+Time\%20desc gives 205 count.
\item The queries \mbox{[}\mbox{\hyperlink{main_8h_acbb11c1e34784cf1e3147029f942bfd6}{B\+A\+S\+E\+\_\+\+U\+RL}}\mbox{]}/\+Datastreams(\textquotesingle{}saqn\%3Ads\%3A6d3c4e7\textquotesingle{})/\+Observations?\$count=True\&\$filter=phenomenon\+Time\%20ge\%202019-\/12-\/31T01\+:29\+:44.\+000Z\%20and\%20phenomenon\+Time\%20le\%202019-\/12-\/31T02\+:03\+:53.\+000Z\&\$orderby=phenomenon\+Time\%20desc gives 204 count, there was \mbox{[}A\+PI\mbox{]} H\+T\+TP Code\+: -\/1.
\item This means, when there is -\/1 H\+T\+TP Status, then the observation is not being posted. When traced the H\+T\+T\+P\+Client library for -\/1 or -\/11, it shows\+:
\begin{DoxyEnumerate}
\item H\+T\+T\+P\+C\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+R\+E\+F\+U\+S\+ED (-\/1)
\item H\+T\+T\+P\+C\+\_\+\+E\+R\+R\+O\+R\+\_\+\+R\+E\+A\+D\+\_\+\+T\+I\+M\+E\+O\+UT (-\/11)
\end{DoxyEnumerate}
\end{DoxyItemize}
\item Just carried the test and judged how many times there is H\+T\+TP C\+O\+DE\+: -\/1 (Ticket\#2185).
\begin{DoxyItemize}
\item Duration\+:
\begin{DoxyItemize}
\item Start\+: 2020-\/01-\/19T03\+:02\+:38 and End\+: 2020-\/01-\/20T04\+:14\+:02
\item Alternative time units\+: 1 day, 1 hour, 11 minutes and 24 seconds can be converted to one of these units\+: 90,684 seconds
\end{DoxyItemize}
\item Analysis\+:
\begin{DoxyItemize}
\item Reset occurrences\+: 3 i.\+e. routine resets at 4\+:00
\item ideally it should be around 9068 observation set of five, searchig the following in an Editor shows\+:
\begin{DoxyEnumerate}
\item \char`\"{}\mbox{[}\+A\+P\+I\mbox{]} Post Observation...\char`\"{} counts 43429 i.\+e. 8685.\+8 observation set of five
\item \char`\"{}\mbox{[}\+A\+P\+I\mbox{]} H\+T\+T\+P Code\+: -\/1\char`\"{} counts 339 i.\+e. 339/43429x100=0.\+0078\%
\end{DoxyEnumerate}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{index_changelog}{}\section{Change Log}\label{index_changelog}
\hypertarget{index_changelog2}{}\subsection{F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+O\+N 0.\+8.\+6.\+1 onwards}\label{index_changelog2}

\begin{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Mar. 28, 2020
\begin{DoxyItemize}
\item add an extra html page that is indirectly accessed using \href{http://}{\texttt{ http\+://}}\mbox{[}H\+O\+M\+E-\/\+IP\mbox{]}/dummy. This is not visible in the menues.
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Mar. 11, 2020
\begin{DoxyItemize}
\item Showing error as E00. Also separate Error Decoding section is added explaining different errors.
\item software version is not now saved in eeprom.
\item license patching bug fix. now it is implemented as\+: if any of \char`\"{}name\char`\"{} and \char`\"{}legal\+\_\+notice\char`\"{} is changed, the license is patched with new \char`\"{}name\char`\"{}, \char`\"{}legal\+\_\+notice\char`\"{} and \char`\"{}url\char`\"{}.
\item get\+\_\+value(\char`\"{}user\+\_\+data\char`\"{}, \char`\"{}rht\+\_\+sensor\char`\"{}) is used to read rht\+\_\+sensor values frequently, just dit this at the begining and save it to \char`\"{}rht\+Sensor\char`\"{}
\item more introduction text, added logo to Latex title page by adding custom headers, removal of \char`\"{}\+Generated by Doxygen\char`\"{} from refman.\+tex manually
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Mar. 07, 2020
\begin{DoxyItemize}
\item \mbox{\hyperlink{create__json_8h_ab1d2a71062488a1b8d2f9129682a42b9}{S\+O\+F\+T\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON}} in \mbox{\hyperlink{create__json_8h}{create\+\_\+json.\+h}} is updated and sync with \mbox{\hyperlink{main_8h_aa14dc39d52ab121ceb570f1a265385e0}{F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+ON}}
\item updated the doxygen with Known bugs
\item license patching is implemented now. If the License is not there or if it is in the old form, it is patched.
\item use the current timestamp (=date of installation or date of first booting) for software.\+version
\item adjust error code and ID on the same line
\item bug fix to show QR while creating entities and whether it is successful or not
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Mar. 01, 2020
\begin{DoxyItemize}
\item handle client is bring out of the statemachine, Alternative QR code screens for ID (in AP mode) and for IP (in Wifi connected), interval can be controlled using different constants. Contrast is controlled.
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Feb. 24, 2020
\begin{DoxyItemize}
\item changing bit position of errors according to harwdare/software types, use multiple screens for release version only,
\item cleaning code and removing extra variables and expressions etc. update the flowchart and documentation
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Feb. 20, 2020
\begin{DoxyItemize}
\item adding the recent features into SM Flowchart and into create entities flowchart.
\item avoid using long paths, and setting it to use relative path in doxygen html/latex (S\+T\+R\+I\+P\+\_\+\+F\+R\+O\+M\+\_\+\+P\+A\+TH).
\item License type=$>$name, owner=$>$legal\+\_\+notice, metadata=$>$url in the json messages, and Lizenz=$>$ Lizenz Name, Name=$>$Legal Notice in the html configuration page
\item fixing \char`\"{}\+Lizenz Name\char`\"{}, \char`\"{}\+Legal Notice\char`\"{} split on different lines. bold, italic, strong
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Feb. 18, 2020
\begin{DoxyItemize}
\item cleaned extra constant and variables from timer\+\_\+definition.\+h, made interrupt based inetervals to balance screen timings
\item added images into doxygen html, generated doxygen latex and then pdf
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Feb. 14, 2020
\begin{DoxyItemize}
\item E\+S\+P32 board version 1.\+0.\+4 downgraded to 1.\+0.\+3, as the earlier was having problem with m\+D\+NS.
\item added integer save and read function from eeprom
\item There are two screens that are toggled with the interval of 5sec\+: 1.\+Normal Screen 2. Statistical Screen
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Jan. 19, 2020
\begin{DoxyItemize}
\item modeling new nomenclature, blinking H\+T\+TP server error but only at the begining, patching things properties, posting observations with /\+Datastreams(\textquotesingle{}iot\+Id\textquotesingle{})/\+Observations
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Jan. 12, 2020
\begin{DoxyItemize}
\item adding 3rd parameter to \mbox{\hyperlink{main_8h_a24fe5bb6b476d220ec484ce84ee1dee4}{create\+Or\+Update\+Entities()}}, if true will patch the created entities otherwise just create it. only datastreams are patched.
\item instead of using repeated checks for 200 \& 201 code, just copy it inside individiual funstions.
\item Changes the Q\+R\+Code=ID, Changes Frost Manager Initialising, Updating Auto\+Connect 1.\+1.\+3
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Jan. 3, 2020
\begin{DoxyItemize}
\item integrating u8g2 and u8x8 unseccessful, using u8g2 for suitable text F\+O\+NT and QR code generation, including logos K\+IT,T\+E\+CO, showing QR code.
\item using alternative oled and QR code libraries, u8g2\+: (\href{https://github.com/olikraus/u8g2}{\texttt{ https\+://github.\+com/olikraus/u8g2}}), Q\+Rcode\+: (\href{https://github.com/ricmoo/qrcode/}{\texttt{ https\+://github.\+com/ricmoo/qrcode/}}).
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Dec. 29, 2019
\begin{DoxyItemize}
\item introducing the common D\+E\+B\+UG controll using \mbox{\hyperlink{main_8h_a5e9ff2a0401c64386c0b7277b07063cf}{M\+Y\+\_\+\+D\+B\+G()}}
\item for H\+T\+TP Error Code 404, making consistent check for different \char`\"{}\+Nothing found.\char`\"{} response from different servers
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Dec. 24, 2019
\begin{DoxyItemize}
\item first version of de\+Frosting the esp32-\/thingsapi, looking into A\+PI code and catching up all J\+S\+ON message and converting into strings without using Arduino\+J\+S\+ON.
\item fixing http error for different entities while creating and posting and gaurentying no error, test different Things and Locations and how they are creating/patched.
\item added flow chart for creating entities, removed all esp32-\/thingsapi calls/libraries
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Dec. 2, 2019
\begin{DoxyItemize}
\item added R\+E\+L\+E\+A\+S\+E\+\_\+\+T\+H\+I\+N\+G\+S\+A\+P\+I1 \& R\+E\+L\+E\+A\+S\+E\+\_\+\+T\+H\+I\+N\+G\+S\+A\+P\+I2 in esp32\+\_\+thingsapi/src/workshop\+\_\+instances/\+Release-\/\+Things\+A\+P\+I.\+h
\item in esp32-\/thingsapi, all prints are precded by \mbox{[}A\+PI\mbox{]} to differtiate from other debugging statements
\item updated eztime library to 0.\+8.\+2, used eztime set\+Interval(10) function just before waitsync().
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+7.\+0\mbox{]} Nov. 1, 2019
\begin{DoxyItemize}
\item Updated Espressif from 1.\+0.\+2 to 1.\+0.\+4 and Auto\+Connect from 1.\+0.\+2 to 1.\+1.\+2 (Reuires changes in \mbox{\hyperlink{my_auto_connect_8h}{my\+Auto\+Connect.\+h}})
\item added initial screens around F\+R\+O\+ST initialisation
\item used \char`\"{}master\char`\"{} branch instead of \char`\"{}development\char`\"{} of submodule esp32\+\_\+thingsapi
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+6.\+1\mbox{]} Sept. 19, 2019
\begin{DoxyItemize}
\item Adding configuration \& O\+TA pages using Auto\+Connect\+Aux without Pagebuilder and fixing different issues (Sajjad)
\item cleaning all the unnessary comments, defining HW pins constants, addresses etc and documenting them. (Sajjad)
\item moved to J\+S\+O\+N6 (by Jan)
\item fixed graphic O\+L\+ED overlapping bugs because it don\textquotesingle{}t have clearline() function and it clears whole display (Sajjad)
\item using B\+M\+E280 R\+E\+D/\+P\+U\+R\+P\+LE by just changing address in bme(address, sda, scl) (Sajjad)
\item fixed B\+M\+E280 not found problem by using another Two\+Wire instance Wire1 (Sajjad)
\item started doxygen documentations (Sajjad).
\item graphic based oled with qr support (Sajjad).
\item converted to state machine (Sajjad).
\item inherited Auto\+Connect to use custom code (Sajjad).
\item added N\+TP sync timeout (Sajjad).
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{index_log1}{}\subsection{F\+I\+R\+M\+W\+A\+R\+E\+\_\+\+V\+E\+R\+S\+I\+O\+N 0.\+8.\+6 and older}\label{index_log1}
change history (since version 0.\+8)
\begin{DoxyItemize}
\item \mbox{[}0.\+8.\+1\mbox{]}
\begin{DoxyItemize}
\item bugfix for coordinates\+: switched to coordinates\mbox{[}\mbox{]}=\{long, lat...\}
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+2\mbox{]}
\begin{DoxyItemize}
\item added hack for H\+T\+TP patch for location
\item removed all libs from src folder that are used in its original state and included the libs directly in arduino
\item updated S\+D\+S011 lib to newest version
\item changed display font
\item added over the air update support
\item added m\+D\+NS\+: now esp32.\+local can be typed into browser to connect to esp32
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+3\mbox{]}
\begin{DoxyItemize}
\item bugfix for error that no reboot occured after timeout in ap mode
\item bugfix for wrong display message if no RH T sensor is configured
\item bugfix for wrong display message if Wifi is searched
\item improved display messages
\item bugfix for not working geocode button
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+4\mbox{]}
\begin{DoxyItemize}
\item added properties and webinterface inputs for data license
\item geocoding button does not work again, previous bugfix did not work
\end{DoxyItemize}
\item \mbox{[}0.\+8.\+5\mbox{]}
\begin{DoxyItemize}
\item (hopefully) permanent bugfix for not working geocode button
\item added license url to webinterface
\item added R\+E\+L\+E\+A\+SE macro that can be used to switch between development and release versions (switches server addresses and supressses some serial output)
\item display shows FW version for 2 sec on startup
\item webinterface shows map to pick location
\item added reboot after saving configuration, so that thing and datastreams are patched in new \mbox{\hyperlink{esp32-stationary_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup()}}
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{index_deb}{}\section{Quick Debugging}\label{index_deb}
The detailed debugging can be controlled for the firmware using the constant R\+E\+L\+E\+A\+SE.
\begin{DoxyEnumerate}
\item E\+S\+P32-\/\+T\+H\+I\+N\+G\+S\+A\+PI D\+E\+B\+U\+G\+G\+I\+NG For quick debugging of different functionality and parts of the code, we can use following quick tricks for debugging. Defined a constant i.\+e. R\+E\+L\+E\+A\+S\+\_\+\+T\+H\+I\+N\+G\+S\+A\+P\+I1 \& R\+E\+L\+E\+A\+S\+\_\+\+T\+H\+I\+N\+G\+S\+A\+P\+I2 in the file \mbox{\hyperlink{main_8h}{main.\+h}}, for more detailed or more important respectively.~\newline
 uncomment \mbox{\hyperlink{main_8h_a7e7232f278193dd8684f973ee70ef3f5}{M\+Y\+\_\+\+D\+E\+B\+UG}} to supress debugg messages (otherwise will print more detailed)~\newline
 All prints are precded by \mbox{[}A\+PI\mbox{]} to differtiate from other debugging statements
\item Use Short Timeouts
\begin{DoxyItemize}
\item \mbox{\hyperlink{main_8h_a8a1756fdd61bca61d188ce01ece876b9}{A\+P\+M\+O\+D\+E\+\_\+\+R\+E\+B\+O\+O\+T\+\_\+\+T\+I\+M\+E\+O\+UT}} 3600000=10min (default). This is intervall of auto reboot while in access point mode. Try with 1min for debugging
\item \mbox{\hyperlink{main_8h_ad8124687637087b9096f96b838f93400}{N\+T\+P\+\_\+\+T\+I\+M\+E\+O\+U\+T\+\_\+\+W\+A\+IT}}=60s. Timeout for N\+TP timeout in wait\+For\+Sync(), try 20s
\item \mbox{\hyperlink{my_auto_connect_8h_ab8e5b92436ed19ff04454974ca9b5140}{W\+I\+F\+I\+\_\+\+R\+E\+B\+O\+O\+T\+\_\+\+T\+I\+M\+E\+O\+UT}}=150000=2.\+5min, Timeout to search Wi\+Fi already configured. Try with 1min for debugging
\end{DoxyItemize}
\item Sending data without J\+S\+ON error\+: To test some functionality, like Auto\+Connect, Wifi, E\+E\+P\+R\+OM, Timeouts etc, uploading is not required, one can skip it.~\newline
 
\begin{DoxyPre}{\ttfamily 
    case check\_location\_data:
       // only send if position data is given
       //if (enable\_send2frost \&\&  (get\_value("user\_data", "latitude") != ""))
       //\{
       //  Serial.println("position data is given, start sending");
       //  state = check\_timesync;
       //\}else
         state = handle\_client;
       break;
 }\end{DoxyPre}

\item By\+Passing Save Credentials\+: One can use the manual Wi\+Fi to quickly run the code. Put the following in the \mbox{\hyperlink{esp32-stationary_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup()}}~\newline
 
\begin{DoxyPre}{\ttfamily 
  WiFi.begin("WG21", "Pakistan1");//Sajjad Debugging
 }\end{DoxyPre}

\item Testing Webpage \& Avoid changing data\+: One can fix the eeprom data by putting the following code in the \mbox{\hyperlink{esp32-stationary_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup()}}~\newline
 
\begin{DoxyPre}{\ttfamily 
 set\_value("user\_data", "address", "");       //inputAddress
 set\_value("user\_data", "latitude", "");       //inputLon
 set\_value("user\_data", "longitude", "");      //inputLat
 set\_value("user\_data", "rht\_sensor", "default");  //inputRhtsensor
 set\_value("user\_data", "sds011id", "");       //inputSds011id
 set\_value("user\_data", "data\_license", "CC BY 4.0");//inputLicense
 set\_value("user\_data", "data\_owner", "");     //inputOwner
 }\end{DoxyPre}

\item If the storage space is too small when compiling, change it in arduino I\+DE\+:~\newline
 Tools -\/$>$ board -\/$>$ select E\+S\+P32 D\+EV Module~\newline
 Tools -\/$>$ partition scheme -\/$>$ No O\+TA (large A\+PP)~\newline
 
\end{DoxyEnumerate}\hypertarget{index_author}{}\section{Author(s)}\label{index_author}

\begin{DoxyItemize}
\item Jan Formanek,
\item Sajjad Hussain,
\item Matthias Budde,
\end{DoxyItemize}

The team at T\+E\+CO (www.\+teco.\+edu) and at Chair for Pervasive Computing Systems (\href{https://pcs.tm.kit.edu}{\texttt{ https\+://pcs.\+tm.\+kit.\+edu}}).\hypertarget{index_license}{}\section{License}\label{index_license}
This code belongs to T\+E\+CO www.\+teco.\+edu and must be reffered when used. B\+SD license, all text here must be included in any redistribution. \hypertarget{index_ack}{}\subsection{Acknowledgments}\label{index_ack}
The following libraries were used\+:~\newline

\begin{DoxyItemize}
\item Espressif Systems\+: Licenses and Copyright 2015-\/2016 Espressif Systems (Shanghai) P\+TE L\+TD
\item Arduino\+Json is licensed under the M\+IT License. \href{https://arduinojson.org/}{\texttt{ https\+://arduinojson.\+org/}}
\item Adafruit B\+M\+E280 is licensed under Adafruit. \href{https://adafruit.com/}{\texttt{ https\+://adafruit.\+com/}}
\item D\+HT sensor is licensed under Adafruit. \href{https://adafruit.com/}{\texttt{ https\+://adafruit.\+com/}}
\item Auto\+Connect is licensed under the M\+IT License. \href{https://github.com/Hieromon/AutoConnect}{\texttt{ https\+://github.\+com/\+Hieromon/\+Auto\+Connect}}
\item Q\+R\+Code by Richard Moore is licensed under the M\+IT License \href{https://github.com/ricmoo/QRCode/blob/master/LICENSE.txt}{\texttt{ https\+://github.\+com/ricmoo/\+Q\+R\+Code/blob/master/\+L\+I\+C\+E\+N\+S\+E.\+txt}}
\item ez\+Time is licensed under the M\+IT License. \href{https://github.com/ropg/ezTime}{\texttt{ https\+://github.\+com/ropg/ez\+Time}}
\item Page\+Builder is licensed under the M\+IT License. \href{https://github.com/Hieromon/PageBuilder}{\texttt{ https\+://github.\+com/\+Hieromon/\+Page\+Builder}}
\item U8g2 is licensed under the M\+IT License. \href{https://github.com/olikraus/u8g2}{\texttt{ https\+://github.\+com/olikraus/u8g2}}
\item S\+D\+S011 sensor Library is licensed under the M\+IT License. (\href{https://github.com/ricki-z/SDS011}{\texttt{ https\+://github.\+com/ricki-\/z/\+S\+D\+S011}})
\end{DoxyItemize}\hypertarget{index_mit}{}\subsection{M\+I\+T License}\label{index_mit}
\begin{DoxyVerb}   Copyright (c) 2017-2019 Hieromon Ikasamo

   Permission is hereby granted, free of charge, to any person obtaining a copy
   of this software and associated documentation files (the "Software"), to deal
   in the Software without restriction, including without limitation the rights
   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   copies of the Software, and to permit persons to whom the Software is
   furnished to do so, subject to the following conditions:

   The above copyright notice and this permission notice shall be included in all
   copies or substantial portions of the Software.

   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   SOFTWARE.
\end{DoxyVerb}
\hypertarget{index_u8gLic}{}\subsection{U8g2lib License}\label{index_u8gLic}
\begin{DoxyVerb}   The U8g2lib code (http://code.google.com/p/u8g2/) is licensed under the terms of 
   the new-bsd license (two-clause bsd license).
   See also: http://www.opensource.org/licenses/bsd-license.php

   The repository and optionally the releases contain icons, which are
   derived from the WPZOOM Developer Icon Set:
   http://www.wpzoom.com/wpzoom/new-freebie-wpzoom-developer-icon-set-154-free-icons/
   WPZOOM Developer Icon Set by WPZOOM is licensed under a Creative Commons 
   Attribution-ShareAlike 3.0 Unported License.

   Fonts are licensed under different conditions.
   See  https://github.com/olikraus/u8g2/wiki/fntgrp
   for detailed information on the licensing conditions for each font. 
\end{DoxyVerb}
\hypertarget{index_EspressifLic}{}\subsection{Espressif Systems License}\label{index_EspressifLic}
\begin{DoxyVerb}   Copyright 2015-2016 Espressif Systems (Shanghai) PTE LTD

   Licensed under the Apache License, Version 2.0 (the "License");    
   you may not use this file except in compliance with the License.    
   You may obtain a copy of the License at    
   http://www.apache.org/licenses/LICENSE-2.0    
   Unless required by applicable law or agreed to in writing, software    
   distributed under the License is distributed on an "AS IS" BASIS,    
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.    
   See the License for the specific language governing permissions and    
   limitations under the License.
\end{DoxyVerb}


\begin{DoxyDate}{Date}
19.\+08.\+2019 
\end{DoxyDate}
