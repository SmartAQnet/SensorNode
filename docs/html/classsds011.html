<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMARTAQNET-STATIONARY: sds011 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="monogram.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="monogram.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SMARTAQNET-STATIONARY
   </div>
   <div id="projectbrief">Smart Air Quality Network Crowdsensor Firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classsds011.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classsds011-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sds011 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classsds011.html" title="sds011 sensor class interface to interace with the hardware">sds011</a> sensor class interface to interace with the hardware  
 <a href="classsds011.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="sds011lib_8h_source.html">sds011lib.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae552c4c94bf5496db36fc0b31b574322"><td class="memItemLeft" align="right" valign="top"><a id="ae552c4c94bf5496db36fc0b31b574322"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#ae552c4c94bf5496db36fc0b31b574322">sds011</a> (void)</td></tr>
<tr class="memdesc:ae552c4c94bf5496db36fc0b31b574322"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor for the class <br /></td></tr>
<tr class="separator:ae552c4c94bf5496db36fc0b31b574322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28daf4c12e7757c1afdf37fe4a1ece87"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a28daf4c12e7757c1afdf37fe4a1ece87">begin</a> (HardwareSerial *uart, uint8_t rx, uint8_t tx, uint8_t id_1=<a class="el" href="sds011lib_8h.html#a87c3ec3696c2e8a2489b9930871469b4">MSG_FF</a>, uint8_t id_2=<a class="el" href="sds011lib_8h.html#a87c3ec3696c2e8a2489b9930871469b4">MSG_FF</a>)</td></tr>
<tr class="memdesc:a28daf4c12e7757c1afdf37fe4a1ece87"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes the <a class="el" href="classsds011.html" title="sds011 sensor class interface to interace with the hardware">sds011</a> sensor with hardware port and pins  <a href="#a28daf4c12e7757c1afdf37fe4a1ece87">More...</a><br /></td></tr>
<tr class="separator:a28daf4c12e7757c1afdf37fe4a1ece87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5ba9739e019b5a877e5800d648a41f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a5c5ba9739e019b5a877e5800d648a41f">dataReportingModeCmd</a> (uint8_t *response, uint8_t mod=<a class="el" href="sds011lib_8h.html#aa7af1453a9caa4f85b40e2e386c741ba">AUTO_REPORT_MODE</a>, uint8_t wr=<a class="el" href="sds011lib_8h.html#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a>)</td></tr>
<tr class="memdesc:a5c5ba9739e019b5a877e5800d648a41f"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to set the reporting mode to auto or query response will contain either QUERY_MODE or AUTO_REPORT_MODE, depending on how it was set by this function ( by setting argument wr to WRITE_MODE), or how it was set before if argument wr was set to READ_MODE.  <a href="#a5c5ba9739e019b5a877e5800d648a41f">More...</a><br /></td></tr>
<tr class="separator:a5c5ba9739e019b5a877e5800d648a41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1416e1fd84eea84ea4d3cdf8a3da8041"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a1416e1fd84eea84ea4d3cdf8a3da8041">dataQueryCmd</a> (float *ppm10, float *ppm25)</td></tr>
<tr class="memdesc:a1416e1fd84eea84ea4d3cdf8a3da8041"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to retrieve PM values  <a href="#a1416e1fd84eea84ea4d3cdf8a3da8041">More...</a><br /></td></tr>
<tr class="separator:a1416e1fd84eea84ea4d3cdf8a3da8041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa166632fddcea1c7841e3578c1c7678c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#aa166632fddcea1c7841e3578c1c7678c">dataAutoQueryCmd</a> (float *ppm10, float *ppm25)</td></tr>
<tr class="memdesc:aa166632fddcea1c7841e3578c1c7678c"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to retrieve PM values with out Query command, it will send automatically at the interval set by the work period command  <a href="#aa166632fddcea1c7841e3578c1c7678c">More...</a><br /></td></tr>
<tr class="separator:aa166632fddcea1c7841e3578c1c7678c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7adab4f4b33b7e9f517dc9179086b6ed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a7adab4f4b33b7e9f517dc9179086b6ed">deviceIdCmd</a> (uint8_t response[2], uint8_t new_Id1, uint8_t new_Id2)</td></tr>
<tr class="memdesc:a7adab4f4b33b7e9f517dc9179086b6ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to set new id/serial number for the sensor. Device id is two bytes, the factory sets each device to a unique id. New id will be returned in response. By default any device is addressed by address FF FF. This is the default for this library as not many people will connect more than one device to the same serial lines. If this default (FF FF) is used, class instance device id (_id_1 and _id_2 ) will not be updated with this new device address, and FF FF will continued to be used to address the device.  <a href="#a7adab4f4b33b7e9f517dc9179086b6ed">More...</a><br /></td></tr>
<tr class="separator:a7adab4f4b33b7e9f517dc9179086b6ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ddddbcb9213f2b0674dee5fb47a5de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#ad9ddddbcb9213f2b0674dee5fb47a5de">sleepWorkModeCmd</a> (uint8_t *response, uint8_t mod=<a class="el" href="sds011lib_8h.html#a6999479ba92a931638a17a00c35a5234">WORK_MODE</a>, uint8_t wr=<a class="el" href="sds011lib_8h.html#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a>)</td></tr>
<tr class="memdesc:ad9ddddbcb9213f2b0674dee5fb47a5de"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to set sleep or work mode and check the response. response will contain either sds011_dataReportingModeCmd or sds011_SLEEPING, depending on how it was set by this function ( by setting argument set to WRITE_MODE), or how it was set before if argument wr was set to sds011_ASK.  <a href="#ad9ddddbcb9213f2b0674dee5fb47a5de">More...</a><br /></td></tr>
<tr class="separator:ad9ddddbcb9213f2b0674dee5fb47a5de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb6b05a9fb97fa175dfa3d7194681f3d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#adb6b05a9fb97fa175dfa3d7194681f3d">workPeriodCmd</a> (uint8_t *response, uint8_t minutes=0, uint8_t wr=<a class="el" href="sds011lib_8h.html#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a>)</td></tr>
<tr class="memdesc:adb6b05a9fb97fa175dfa3d7194681f3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to set work period for reporting.  <a href="#adb6b05a9fb97fa175dfa3d7194681f3d">More...</a><br /></td></tr>
<tr class="separator:adb6b05a9fb97fa175dfa3d7194681f3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0dfdae3b5b512aca1fbe287da29616a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#ac0dfdae3b5b512aca1fbe287da29616a">deviceInfoCmd</a> (String *ver, uint16_t *id)</td></tr>
<tr class="memdesc:ac0dfdae3b5b512aca1fbe287da29616a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to get the device firmware version and serial number. response[3] contains firmware date as YY, MM, DD if succesful else FF FF FF.  <a href="#ac0dfdae3b5b512aca1fbe287da29616a">More...</a><br /></td></tr>
<tr class="separator:ac0dfdae3b5b512aca1fbe287da29616a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359f7baaa2272648ef381ed04f604a11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a359f7baaa2272648ef381ed04f604a11">setDebug</a> (bool on)</td></tr>
<tr class="memdesc:a359f7baaa2272648ef381ed04f604a11"><td class="mdescLeft">&#160;</td><td class="mdescRight">setting a debugging flag  <a href="#a359f7baaa2272648ef381ed04f604a11">More...</a><br /></td></tr>
<tr class="separator:a359f7baaa2272648ef381ed04f604a11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aff3c41586a6f4ac084edfb0da0f05c40"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#aff3c41586a6f4ac084edfb0da0f05c40">sendCommand</a> (uint8_t command, uint8_t option_1, uint8_t option_2, uint8_t id_1, uint8_t id_2)</td></tr>
<tr class="memdesc:aff3c41586a6f4ac084edfb0da0f05c40"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to send the command to sensor and fetch the response into a buffer. When no reply is received, usually this is because device was just reporting. This happens when device is in reporting mode, as then the device spits out a a continuous stream of data. In such cases. command has to be sent again to get an answer.  <a href="#aff3c41586a6f4ac084edfb0da0f05c40">More...</a><br /></td></tr>
<tr class="separator:aff3c41586a6f4ac084edfb0da0f05c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff0bda35ce371348033b9c2983b8999"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a8ff0bda35ce371348033b9c2983b8999">getResponse</a> (uint8_t cmd, uint8_t reply[10])</td></tr>
<tr class="memdesc:a8ff0bda35ce371348033b9c2983b8999"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to send the command to sensor and fetch the response into a buffer. When no reply is received, usually this is because device was just reporting. This happens when device is in reporting mode, as then the device spits out a a continuous stream of data.  <a href="#a8ff0bda35ce371348033b9c2983b8999">More...</a><br /></td></tr>
<tr class="separator:a8ff0bda35ce371348033b9c2983b8999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0c11ba7bef6a0cc7812ced5bb31d60"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a2b0c11ba7bef6a0cc7812ced5bb31d60">sdsCommunicate</a> (uint8_t command, uint8_t option_1, uint8_t option_2, uint8_t id_1, uint8_t id_2, uint8_t reply[10])</td></tr>
<tr class="memdesc:a2b0c11ba7bef6a0cc7812ced5bb31d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to communicate to sensor by sending a command and fetch the response into a buffer.  <a href="#a2b0c11ba7bef6a0cc7812ced5bb31d60">More...</a><br /></td></tr>
<tr class="separator:a2b0c11ba7bef6a0cc7812ced5bb31d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a65876aa058bdb6997257dac48757aa76"><td class="memItemLeft" align="right" valign="top"><a id="a65876aa058bdb6997257dac48757aa76"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a65876aa058bdb6997257dac48757aa76">_rx</a></td></tr>
<tr class="memdesc:a65876aa058bdb6997257dac48757aa76"><td class="mdescLeft">&#160;</td><td class="mdescRight">uart rx pin <br /></td></tr>
<tr class="separator:a65876aa058bdb6997257dac48757aa76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5352382f195b929e74567224f6d65c3"><td class="memItemLeft" align="right" valign="top"><a id="af5352382f195b929e74567224f6d65c3"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#af5352382f195b929e74567224f6d65c3">_tx</a></td></tr>
<tr class="memdesc:af5352382f195b929e74567224f6d65c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">uart tx pin <br /></td></tr>
<tr class="separator:af5352382f195b929e74567224f6d65c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a7bd17192b5ec971c24380263a7004"><td class="memItemLeft" align="right" valign="top"><a id="af6a7bd17192b5ec971c24380263a7004"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#af6a7bd17192b5ec971c24380263a7004">_id_1</a></td></tr>
<tr class="memdesc:af6a7bd17192b5ec971c24380263a7004"><td class="mdescLeft">&#160;</td><td class="mdescRight">serial number lower byte <br /></td></tr>
<tr class="separator:af6a7bd17192b5ec971c24380263a7004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06eef5f34d3b50088080446f0e16604e"><td class="memItemLeft" align="right" valign="top"><a id="a06eef5f34d3b50088080446f0e16604e"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a06eef5f34d3b50088080446f0e16604e">_id_2</a></td></tr>
<tr class="memdesc:a06eef5f34d3b50088080446f0e16604e"><td class="mdescLeft">&#160;</td><td class="mdescRight">serial number lower byte <br /></td></tr>
<tr class="separator:a06eef5f34d3b50088080446f0e16604e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b5c02bd7c5a65b942893faf97ec9547"><td class="memItemLeft" align="right" valign="top"><a id="a4b5c02bd7c5a65b942893faf97ec9547"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#a4b5c02bd7c5a65b942893faf97ec9547">_debug</a></td></tr>
<tr class="memdesc:a4b5c02bd7c5a65b942893faf97ec9547"><td class="mdescLeft">&#160;</td><td class="mdescRight">the debugging flag <br /></td></tr>
<tr class="separator:a4b5c02bd7c5a65b942893faf97ec9547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf3f2bce299fd52c3dbca71136a35f6"><td class="memItemLeft" align="right" valign="top"><a id="adbf3f2bce299fd52c3dbca71136a35f6"></a>
Stream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsds011.html#adbf3f2bce299fd52c3dbca71136a35f6">_uart</a></td></tr>
<tr class="memdesc:adbf3f2bce299fd52c3dbca71136a35f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">the hardware uart port <br /></td></tr>
<tr class="separator:adbf3f2bce299fd52c3dbca71136a35f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classsds011.html" title="sds011 sensor class interface to interace with the hardware">sds011</a> sensor class interface to interace with the hardware </p>

<p class="definition">Definition at line <a class="el" href="sds011lib_8h_source.html#l00057">57</a> of file <a class="el" href="sds011lib_8h_source.html">sds011lib.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a28daf4c12e7757c1afdf37fe4a1ece87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28daf4c12e7757c1afdf37fe4a1ece87">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::begin </td>
          <td>(</td>
          <td class="paramtype">HardwareSerial *&#160;</td>
          <td class="paramname"><em>uart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_1</em> = <code><a class="el" href="sds011lib_8h.html#a87c3ec3696c2e8a2489b9930871469b4">MSG_FF</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_2</em> = <code><a class="el" href="sds011lib_8h.html#a87c3ec3696c2e8a2489b9930871469b4">MSG_FF</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initializes the <a class="el" href="classsds011.html" title="sds011 sensor class interface to interace with the hardware">sds011</a> sensor with hardware port and pins </p>
<p>Specification from the Nova Fitness Co. Ltd. <a class="el" href="classsds011.html" title="sds011 sensor class interface to interace with the hardware">sds011</a> data sheet, V1.3</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft" colspan="2">UART   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Bit rate  </td><td class="markdownTableBodyLeft">9600   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Data bit  </td><td class="markdownTableBodyLeft">8   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Parity bit  </td><td class="markdownTableBodyLeft">NO   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Stop bit  </td><td class="markdownTableBodyLeft">1   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Data Packet frequency  </td><td class="markdownTableBodyLeft">1Hz   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uart</td><td>hardware uart port </td></tr>
    <tr><td class="paramname">rx</td><td>uart recieve pin </td></tr>
    <tr><td class="paramname">tx</td><td>uart transmit pin </td></tr>
    <tr><td class="paramname">id_1</td><td>device lower byter </td></tr>
    <tr><td class="paramname">id_2</td><td>device higher byter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status true when executed seccessfully </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00575">575</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="aa166632fddcea1c7841e3578c1c7678c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa166632fddcea1c7841e3578c1c7678c">&#9670;&nbsp;</a></span>dataAutoQueryCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::dataAutoQueryCmd </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>pm10</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>pm25</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to retrieve PM values with out Query command, it will send automatically at the interval set by the work period command </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pm10</td><td>returned value of PM10 sensor value </td></tr>
    <tr><td class="paramname">pm25</td><td>returned value of PM25 sensor value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00358">358</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="a1416e1fd84eea84ea4d3cdf8a3da8041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1416e1fd84eea84ea4d3cdf8a3da8041">&#9670;&nbsp;</a></span>dataQueryCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::dataQueryCmd </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>pm10</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>pm25</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to retrieve PM values </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pm10</td><td>returned value of PM10 sensor value </td></tr>
    <tr><td class="paramname">pm25</td><td>returned value of PM25 sensor value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00333">333</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="a5c5ba9739e019b5a877e5800d648a41f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c5ba9739e019b5a877e5800d648a41f">&#9670;&nbsp;</a></span>dataReportingModeCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::dataReportingModeCmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mod</em> = <code><a class="el" href="sds011lib_8h.html#aa7af1453a9caa4f85b40e2e386c741ba">AUTO_REPORT_MODE</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>wr</em> = <code><a class="el" href="sds011lib_8h.html#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to set the reporting mode to auto or query response will contain either QUERY_MODE or AUTO_REPORT_MODE, depending on how it was set by this function ( by setting argument wr to WRITE_MODE), or how it was set before if argument wr was set to READ_MODE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>the return the response of the command </td></tr>
    <tr><td class="paramname">mod</td><td>the mode to be set 0:auto, 1:query </td></tr>
    <tr><td class="paramname">wr</td><td>the read (0) or write (1) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00298">298</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="a7adab4f4b33b7e9f517dc9179086b6ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7adab4f4b33b7e9f517dc9179086b6ed">&#9670;&nbsp;</a></span>deviceIdCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::deviceIdCmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>response</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_Id1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_Id2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to set new id/serial number for the sensor. Device id is two bytes, the factory sets each device to a unique id. New id will be returned in response. By default any device is addressed by address FF FF. This is the default for this library as not many people will connect more than one device to the same serial lines. If this default (FF FF) is used, class instance device id (_id_1 and _id_2 ) will not be updated with this new device address, and FF FF will continued to be used to address the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>the return ID value </td></tr>
    <tr><td class="paramname">new_Id1</td><td>new id lower byte </td></tr>
    <tr><td class="paramname">new_Id2</td><td>new id higher byte </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00398">398</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="ac0dfdae3b5b512aca1fbe287da29616a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0dfdae3b5b512aca1fbe287da29616a">&#9670;&nbsp;</a></span>deviceInfoCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::deviceInfoCmd </td>
          <td>(</td>
          <td class="paramtype">String *&#160;</td>
          <td class="paramname"><em>ver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to get the device firmware version and serial number. response[3] contains firmware date as YY, MM, DD if succesful else FF FF FF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ver</td><td>string version to hold the firware version </td></tr>
    <tr><td class="paramname">id</td><td>integer to hold the serial number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status the status of the command </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00522">522</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="a8ff0bda35ce371348033b9c2983b8999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ff0bda35ce371348033b9c2983b8999">&#9670;&nbsp;</a></span>getResponse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::getResponse </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reply</em>[10]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>function to send the command to sensor and fetch the response into a buffer. When no reply is received, usually this is because device was just reporting. This happens when device is in reporting mode, as then the device spits out a a continuous stream of data. </p>
<p>Prompts sensor to report measurement data. If sensor is in report query mode, an according query command is sent first, otherwise, the next measurent reported in the</p>
<p>Specification from the Nova Fitness Co. Ltd. Laser Dust Sensor Control Protocol, V1.4</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Byte  </th><th class="markdownTableHeadLeft" colspan="2">Name  </th><th class="markdownTableHeadLeft">Set Mode Reply  </th><th class="markdownTableHeadLeft">Query Data Reply  </th><th class="markdownTableHeadLeft">Set ID reply  </th><th class="markdownTableHeadLeft">Sleep / Work Reply  </th><th class="markdownTableHeadLeft">FW Version Reply  </th><th class="markdownTableHeadLeft">Working Period Reply   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0  </td><td class="markdownTableBodyLeft" colspan="2">Message header  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1  </td><td class="markdownTableBodyLeft" colspan="2">Command ID  </td><td class="markdownTableBodyLeft">C5  </td><td class="markdownTableBodyLeft">C0  </td><td class="markdownTableBodyLeft">C5  </td><td class="markdownTableBodyLeft">C5  </td><td class="markdownTableBodyLeft">C5  </td><td class="markdownTableBodyLeft">C5   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2  </td><td class="markdownTableBodyLeft" colspan="2">DATA 1  </td><td class="markdownTableBodyLeft">2  </td><td class="markdownTableBodyLeft">PM2.5 Low byte  </td><td class="markdownTableBodyLeft">5  </td><td class="markdownTableBodyLeft">6  </td><td class="markdownTableBodyLeft">7  </td><td class="markdownTableBodyLeft">8   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">3  </td><td class="markdownTableBodyLeft" colspan="2">DATA 2  </td><td class="markdownTableBodyLeft">0: query / 1: set  </td><td class="markdownTableBodyLeft">PM2.5 High byte  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0: query / 1: set  </td><td class="markdownTableBodyLeft">Byte 1: year  </td><td class="markdownTableBodyLeft">0: query / 1: set   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">4  </td><td class="markdownTableBodyLeft" colspan="2">DATA 3  </td><td class="markdownTableBodyLeft">0: auto / 1: query  </td><td class="markdownTableBodyLeft">PM10 Low byte  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0: sleep / 1: work  </td><td class="markdownTableBodyLeft">Byte 2: month  </td><td class="markdownTableBodyLeft">0: continuous / 1-30: minutes sleep   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">5  </td><td class="markdownTableBodyLeft" colspan="2">DATA 4  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">PM10 High byte  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">Byte 3: day  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">6  </td><td class="markdownTableBodyLeft" colspan="2">DATA 5  </td><td class="markdownTableBodyLeft">ID byte 1  </td><td class="markdownTableBodyLeft">ID byte 1  </td><td class="markdownTableBodyLeft">New ID byte 1  </td><td class="markdownTableBodyLeft">ID byte 1  </td><td class="markdownTableBodyLeft">ID byte 1  </td><td class="markdownTableBodyLeft">ID byte 1   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">7  </td><td class="markdownTableBodyLeft" colspan="2">DATA 6  </td><td class="markdownTableBodyLeft">ID byte 2  </td><td class="markdownTableBodyLeft">ID byte 2  </td><td class="markdownTableBodyLeft">New ID byte 2  </td><td class="markdownTableBodyLeft">ID byte 2  </td><td class="markdownTableBodyLeft">ID byte 2  </td><td class="markdownTableBodyLeft">ID byte 2   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">8  </td><td class="markdownTableBodyLeft" colspan="2">Check-sum  </td><td class="markdownTableBodyLeft">Check-sum  </td><td class="markdownTableBodyLeft">Check-sum  </td><td class="markdownTableBodyLeft">Check-sum  </td><td class="markdownTableBodyLeft">Check-sum  </td><td class="markdownTableBodyLeft">Check-sum  </td><td class="markdownTableBodyLeft">Check-sum   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">9  </td><td class="markdownTableBodyLeft" colspan="2">Message tail  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft" colspan="2">Calculation   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Check-sum:  </td><td class="markdownTableBodyLeft">Check-sum = DATA1 + DATA2 + ... + DATA6   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">PM2.5 value:  </td><td class="markdownTableBodyLeft">PM2.5 (μg /m3) = ((PM2.5 High byte *256) + PM2.5 low byte)/10   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">PM10 value:  </td><td class="markdownTableBodyLeft">PM10 (μg /m3) = ((PM10 high byte*256) + PM10 low byte)/10   </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a href="https://web.archive.org/web/20200525083221/https://www-sd-nf.oss-cn-beijing.aliyuncs.com/%E5%AE%98%E7%BD%91%E4%B8%8B%E8%BD%BD/sds011%20laser%20PM2.5%20sensor%20specification-V1.4.pdf">https://web.archive.org/web/20200525083221/https://www-sd-nf.oss-cn-beijing.aliyuncs.com/%E5%AE%98%E7%BD%91%E4%B8%8B%E8%BD%BD/sds011%20laser%20PM2.5%20sensor%20specification-V1.4.pdf</a> </dd>
<dd>
<a href="https://www.arduinoforum.de/attachment.php?aid=3023">https://www.arduinoforum.de/attachment.php?aid=3023</a></dd></dl>
<p>In such cases. command has to be sent again to get an answer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>one byte of the command to be sent </td></tr>
    <tr><td class="paramname">reply</td><td>ten bytes of the command response </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00211">211</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="a2b0c11ba7bef6a0cc7812ced5bb31d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b0c11ba7bef6a0cc7812ced5bb31d60">&#9670;&nbsp;</a></span>sdsCommunicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::sdsCommunicate </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>option_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>option_2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reply</em>[10]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>function to communicate to sensor by sending a command and fetch the response into a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>one byte of the command to be sent </td></tr>
    <tr><td class="paramname">option_1</td><td>first parameter of the command, depends on different positions in the command array </td></tr>
    <tr><td class="paramname">option_2</td><td>second parameter of the command, depends on different positions in the command array </td></tr>
    <tr><td class="paramname">id_1</td><td>the id_lsb where commands to be send </td></tr>
    <tr><td class="paramname">id_2</td><td>the id_msb where commands to be send </td></tr>
    <tr><td class="paramname">reply</td><td>ten bytes of the command response </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00059">59</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="aff3c41586a6f4ac084edfb0da0f05c40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3c41586a6f4ac084edfb0da0f05c40">&#9670;&nbsp;</a></span>sendCommand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sds011::sendCommand </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>option_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>option_2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>function to send the command to sensor and fetch the response into a buffer. When no reply is received, usually this is because device was just reporting. This happens when device is in reporting mode, as then the device spits out a a continuous stream of data. In such cases. command has to be sent again to get an answer. </p>
<p>Sends command to the sensor.</p>
<p>Specification from the Nova Fitness Co. Ltd. Laser Dust Sensor Control Protocol, V1.4</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Byte  </th><th class="markdownTableHeadLeft" colspan="2">Name  </th><th class="markdownTableHeadLeft">Reporting Mode  </th><th class="markdownTableHeadLeft">Query Data  </th><th class="markdownTableHeadLeft">Set ID  </th><th class="markdownTableHeadLeft">Manual Sleep / Work  </th><th class="markdownTableHeadLeft">Get Firmware Version  </th><th class="markdownTableHeadLeft">Set Working Period   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0  </td><td class="markdownTableBodyLeft" colspan="2">Message header  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA  </td><td class="markdownTableBodyLeft">AA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1  </td><td class="markdownTableBodyLeft" colspan="2">Command ID  </td><td class="markdownTableBodyLeft">B4  </td><td class="markdownTableBodyLeft">B4  </td><td class="markdownTableBodyLeft">B4  </td><td class="markdownTableBodyLeft">B4  </td><td class="markdownTableBodyLeft">B4  </td><td class="markdownTableBodyLeft">B4   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2  </td><td class="markdownTableBodyLeft" colspan="2">DATA 1  </td><td class="markdownTableBodyLeft">2  </td><td class="markdownTableBodyLeft">4  </td><td class="markdownTableBodyLeft">5  </td><td class="markdownTableBodyLeft">6  </td><td class="markdownTableBodyLeft">7  </td><td class="markdownTableBodyLeft">8   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">3  </td><td class="markdownTableBodyLeft" colspan="2">DATA 2  </td><td class="markdownTableBodyLeft">0: query / 1: set  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0: query / 1: set  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0: query / 1: set   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">4  </td><td class="markdownTableBodyLeft" colspan="2">DATA 3  </td><td class="markdownTableBodyLeft">0: auto / 1: query  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0: sleep / 1: work  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0: continuous / 1-30: minutes sleep   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">5  </td><td class="markdownTableBodyLeft" colspan="2">DATA 4  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">6  </td><td class="markdownTableBodyLeft" colspan="2">DATA 5  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">7  </td><td class="markdownTableBodyLeft" colspan="2">DATA 6  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">8  </td><td class="markdownTableBodyLeft" colspan="2">DATA 7  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">9  </td><td class="markdownTableBodyLeft" colspan="2">DATA 8  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">10  </td><td class="markdownTableBodyLeft" colspan="2">DATA 9  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">11  </td><td class="markdownTableBodyLeft" colspan="2">DATA 10  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">12  </td><td class="markdownTableBodyLeft" colspan="2">DATA 11  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">13  </td><td class="markdownTableBodyLeft" colspan="2">DATA 12  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">New ID Byte 1  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">14  </td><td class="markdownTableBodyLeft" colspan="2">DATA 13  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">New ID Byte 2  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">15  </td><td class="markdownTableBodyLeft" colspan="2">DATA 14  </td><td class="markdownTableBodyLeft">ID Byte 1 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 1 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 1 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 1 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 1 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 1 (FF: all)   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">16  </td><td class="markdownTableBodyLeft" colspan="2">DATA 15  </td><td class="markdownTableBodyLeft">ID Byte 2 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 2 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 2 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 2 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 2 (FF: all)  </td><td class="markdownTableBodyLeft">ID Byte 2 (FF: all)   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">17  </td><td class="markdownTableBodyLeft" colspan="2">Check-sum  </td><td class="markdownTableBodyLeft">checksum  </td><td class="markdownTableBodyLeft">checksum  </td><td class="markdownTableBodyLeft">checksum  </td><td class="markdownTableBodyLeft">checksum  </td><td class="markdownTableBodyLeft">checksum  </td><td class="markdownTableBodyLeft">checksum   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">18  </td><td class="markdownTableBodyLeft" colspan="2">Message tail  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB  </td><td class="markdownTableBodyLeft">AB   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft" colspan="2">Calculation   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Check-sum:  </td><td class="markdownTableBodyLeft">Check-sum = DATA1 + DATA2 + ... + DATA15   </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a href="https://www.arduinoforum.de/attachment.php?aid=3023">https://www.arduinoforum.de/attachment.php?aid=3023</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>one byte of the command to be sent </td></tr>
    <tr><td class="paramname">option_1</td><td>first parameter of the command, depends on different positions in the command array </td></tr>
    <tr><td class="paramname">option_2</td><td>second parameter of the command, depends on different positions in the command array </td></tr>
    <tr><td class="paramname">id_1</td><td>the id_lsb where commands to be send </td></tr>
    <tr><td class="paramname">id_2</td><td>the id_msb where commands to be send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00128">128</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="a359f7baaa2272648ef381ed04f604a11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a359f7baaa2272648ef381ed04f604a11">&#9670;&nbsp;</a></span>setDebug()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sds011::setDebug </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>setting a debugging flag </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">on</td><td>bool flag for debugging </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00549">549</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="ad9ddddbcb9213f2b0674dee5fb47a5de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ddddbcb9213f2b0674dee5fb47a5de">&#9670;&nbsp;</a></span>sleepWorkModeCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::sleepWorkModeCmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mod</em> = <code><a class="el" href="sds011lib_8h.html#a6999479ba92a931638a17a00c35a5234">WORK_MODE</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>wr</em> = <code><a class="el" href="sds011lib_8h.html#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to set sleep or work mode and check the response. response will contain either sds011_dataReportingModeCmd or sds011_SLEEPING, depending on how it was set by this function ( by setting argument set to WRITE_MODE), or how it was set before if argument wr was set to sds011_ASK. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>the return value of the command </td></tr>
    <tr><td class="paramname">mod</td><td>sleep or work mode </td></tr>
    <tr><td class="paramname">wr</td><td>parameter to set (write) or unset (get) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00446">446</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<a id="adb6b05a9fb97fa175dfa3d7194681f3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb6b05a9fb97fa175dfa3d7194681f3d">&#9670;&nbsp;</a></span>workPeriodCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sds011::workPeriodCmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>minutes</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>wr</em> = <code><a class="el" href="sds011lib_8h.html#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to set work period for reporting. </p>
<p>response will contain 0 ( for continuous mode) or the Interval time in minutes (for interval mode). According to the datasheet device will sleep during the interval and become active 30 seconds before the interval is reached. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>the return value of the work perion command </td></tr>
    <tr><td class="paramname">minutes</td><td>duration of sleep time </td></tr>
    <tr><td class="paramname">wr</td><td>parameter to set (write) or unset (get) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status tells the seccessful execution </dd></dl>

<p class="definition">Definition at line <a class="el" href="sds011lib_8cpp_source.html#l00487">487</a> of file <a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>esp32-stationary/<a class="el" href="sds011lib_8h_source.html">sds011lib.h</a></li>
<li>esp32-stationary/<a class="el" href="sds011lib_8cpp_source.html">sds011lib.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classsds011.html">sds011</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
